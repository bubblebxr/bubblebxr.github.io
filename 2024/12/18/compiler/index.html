<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="编译"><meta name="keywords" content="编译原理,笔记"><meta name="author" content="bubble"><meta name="copyright" content="bubble"><title>编译 | bubble's blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '7.3.0'
} </script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="bubble's blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%A6%82%E8%AE%BA"><span class="toc-number">1.</span> <span class="toc-text"> 1 概论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%9A%84%E8%B5%B7%E6%BA%90%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">1.1.</span> <span class="toc-text"> 编译的起源：程序设计语言的发展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.</span> <span class="toc-text"> 基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E5%92%8C%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F%E6%9E%84%E9%80%A0"><span class="toc-number">1.3.</span> <span class="toc-text"> 编译过程和编译程序构造</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 编译过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F%E6%9E%84%E9%80%A0"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 编译程序构造</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%92%8C%E5%90%8E%E7%AB%AF"><span class="toc-number">1.3.2.1.</span> <span class="toc-text"> 前端和后端</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%96%87%E6%B3%95%E5%92%8C%E8%AF%AD%E8%A8%80"><span class="toc-number">2.</span> <span class="toc-text"> 2 文法和语言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%B3%95%E7%9A%84%E9%9D%9E%E5%BD%A2%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text"> 文法的非形式定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%B3%95%E5%92%8C%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">2.2.</span> <span class="toc-text"> 文法和语言的形式定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%B3%95"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 文法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A8%E5%AF%BC"><span class="toc-number">2.2.1.1.</span> <span class="toc-text"> 推导</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E6%96%87%E6%B3%95"><span class="toc-number">2.2.2.1.</span> <span class="toc-text"> 递归文法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%A5%E5%9E%8B%E7%9A%84%E7%9F%AD%E8%AF%AD-%E7%AE%80%E5%8D%95%E7%9F%AD%E8%AF%AD%E5%92%8C%E5%8F%A5%E6%9F%84"><span class="toc-number">2.2.2.2.</span> <span class="toc-text"> 句型的短语、简单短语和句柄</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%91%E4%B8%8E%E4%BA%8C%E4%B9%89%E6%80%A7%E6%96%87%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text"> 语法树与二义性文法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A8%E5%AF%BC%E4%B8%8E%E8%AF%AD%E6%B3%95%E6%8E%A8%E5%AF%BC%E6%A0%91"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 推导与语法推导树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E4%B9%89%E6%80%A7"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 二义性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-number">3.</span> <span class="toc-text"> 3 词法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95%E5%92%8C%E7%8A%B6%E6%80%81%E5%9B%BE"><span class="toc-number">3.1.</span> <span class="toc-text"> 正则文法和状态图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%BB%E7%8A%B6%E6%80%81%E5%9B%BE"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 画状态图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.2.</span> <span class="toc-text"> 构造词法分析程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text"> 4 语法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E5%88%86%E6%9E%90"><span class="toc-number">4.1.</span> <span class="toc-text"> 自顶向下分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 存在问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A6%E9%80%92%E5%BD%92%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.1.1.</span> <span class="toc-text"> 左递归问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E6%BA%AF%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.1.2.</span> <span class="toc-text"> 回溯问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E5%AD%90%E7%A8%8B%E5%BA%8F%E6%B3%95"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 递归下降子程序法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%88%86%E6%9E%90"><span class="toc-number">4.2.</span> <span class="toc-text"> 自底向上分析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%AE%A1%E7%90%86%E6%8A%80%E6%9C%AF"><span class="toc-number">5.</span> <span class="toc-text"> 5 符号表管理技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%9A%84%E7%BB%84%E7%BB%87%E4%B8%8E%E5%86%85%E5%AE%B9"><span class="toc-number">5.2.</span> <span class="toc-text"> 符号表的组织与内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E5%88%86%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AF%AD%E8%A8%80%E7%9A%84%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%BB%84%E7%BB%87"><span class="toc-number">5.3.</span> <span class="toc-text"> 非分程序结构语言的符号表组织</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">5.3.1.</span> <span class="toc-text"> 标识符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%BB%87%E6%96%B9%E5%BC%8F"><span class="toc-number">5.3.2.</span> <span class="toc-text"> 组织方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AF%AD%E8%A8%80%E7%9A%84%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%BB%84%E7%BB%87"><span class="toc-number">5.4.</span> <span class="toc-text"> 分程序结构语言的符号表组织</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88%E5%BC%8F%E7%AC%A6%E5%8F%B7%E8%A1%A8"><span class="toc-number">5.4.1.</span> <span class="toc-text"> 栈式符号表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AD%98%E5%82%A8%E7%BB%84%E7%BB%87%E5%8F%8A%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text"> 6 运行时的存储组织及管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%AD%98%E5%82%A8%E5%88%86%E9%85%8D"><span class="toc-number">6.1.</span> <span class="toc-text"> 静态存储分配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%AD%98%E5%82%A8%E5%88%86%E9%85%8D"><span class="toc-number">6.2.</span> <span class="toc-text"> 动态存储分配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B4%BB%E5%8A%A8%E8%AE%B0%E5%BD%95"><span class="toc-number">6.2.1.</span> <span class="toc-text"> 活动记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%95%B0%E6%8D%AE%E5%8C%BA"><span class="toc-number">6.2.1.1.</span> <span class="toc-text"> 局部数据区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%8C%BA"><span class="toc-number">6.2.1.2.</span> <span class="toc-text"> 参数区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#display-%E5%8C%BA"><span class="toc-number">6.2.1.3.</span> <span class="toc-text"> display 区</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0-display-%E5%8C%BA%E7%9A%84%E8%A7%84%E5%88%99"><span class="toc-number">6.2.2.</span> <span class="toc-text"> 建造 display 区的规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%9C%B0%E5%9D%80%E8%AE%A1%E7%AE%97"><span class="toc-number">6.2.3.</span> <span class="toc-text"> 运行时的地址计算</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E6%BA%90%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%AD%E9%97%B4%E5%BD%A2%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text"> 7 源程序的中间形式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA"><span class="toc-number">7.1.</span> <span class="toc-text"> 波兰表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#if-%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.1.1.</span> <span class="toc-text"> if 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">7.1.2.</span> <span class="toc-text"> 中间代码生成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#n-%E5%85%83%E8%A1%A8%E7%A4%BA"><span class="toc-number">7.2.</span> <span class="toc-text"> N-元表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E5%BC%8F"><span class="toc-number">7.2.1.</span> <span class="toc-text"> 三元式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E5%85%83%E5%BC%8F"><span class="toc-number">7.2.2.</span> <span class="toc-text"> 四元式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9B%BE%E8%A1%A8%E7%A4%BA"><span class="toc-number">7.3.</span> <span class="toc-text"> 中间代码的图表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E8%AF%AD%E6%B3%95%E6%A0%91"><span class="toc-number">7.3.1.</span> <span class="toc-text"> 抽象语法树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dag-%E5%9B%BE"><span class="toc-number">7.3.2.</span> <span class="toc-text"> DAG 图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssa"><span class="toc-number">7.4.</span> <span class="toc-text"> SSA</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">8.</span> <span class="toc-text"> 8 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">8.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%88%86%E7%B1%BB"><span class="toc-number">8.2.</span> <span class="toc-text"> 错误分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E8%AF%8A%E5%AF%9F%E5%92%8C%E6%8A%A5%E5%91%8A"><span class="toc-number">8.3.</span> <span class="toc-text"> 错误诊察和报告</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E8%AF%8A%E5%AF%9F"><span class="toc-number">8.3.1.</span> <span class="toc-text"> 错误诊察</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A"><span class="toc-number">8.3.2.</span> <span class="toc-text"> 错误报告</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%8A%80%E6%9C%AF"><span class="toc-number">8.4.</span> <span class="toc-text"> 错误处理技术</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91%E6%8A%80%E6%9C%AF"><span class="toc-number">9.</span> <span class="toc-text"> 9 语法制导翻译技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BF%BB%E8%AF%91%E6%96%87%E6%B3%95-tg-%E5%92%8C%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91"><span class="toc-number">9.1.</span> <span class="toc-text"> 翻译文法 TG 和语法制导翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%AF%91%E6%96%87%E6%B3%95-atg"><span class="toc-number">9.2.</span> <span class="toc-text"> 属性翻译文法 ATG</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%B1%9E%E6%80%A7"><span class="toc-number">9.2.1.</span> <span class="toc-text"> 综合属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%B1%9E%E6%80%A7"><span class="toc-number">9.2.2.</span> <span class="toc-text"> 继承属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#l-%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%AF%91%E6%96%87%E6%B3%95-l-atg"><span class="toc-number">9.2.3.</span> <span class="toc-text"> L-属性翻译文法 L-ATG</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%B5%8B%E5%80%BC%E5%BD%A2%E5%BC%8F%E7%9A%84-l-%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%AF%91%E6%96%87%E6%B3%95-sl-atg"><span class="toc-number">9.2.3.0.1.</span> <span class="toc-text"> 简单赋值形式的 L-属性翻译文法 SL-ATG</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91"><span class="toc-number">9.3.</span> <span class="toc-text"> 自顶向下语法制导翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E7%BF%BB%E8%AF%91%E5%99%A8"><span class="toc-number">9.3.1.</span> <span class="toc-text"> 递归下降翻译器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%AF%91%E5%99%A8"><span class="toc-number">9.3.2.</span> <span class="toc-text"> 递归下降属性翻译器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90%E5%92%8C%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">10.</span> <span class="toc-text"> 10 语义分析和代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">10.1.</span> <span class="toc-text"> 语义分析的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%88%E5%BC%8F%E6%8A%BD%E8%B1%A1%E6%9C%BA%E5%8F%8A%E5%85%B6%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4"><span class="toc-number">10.2.</span> <span class="toc-text"> 栈式抽象机及其汇编指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">10.3.</span> <span class="toc-text"> 声明的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">10.3.1.</span> <span class="toc-text"> 常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%8F%98%E9%87%8F"><span class="toc-number">10.3.2.</span> <span class="toc-text"> 简单变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F"><span class="toc-number">10.3.3.</span> <span class="toc-text"> 数组变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">10.4.</span> <span class="toc-text"> 表达式的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">10.5.</span> <span class="toc-text"> 赋值语句的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">10.6.</span> <span class="toc-text"> 控制语句的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E5%92%8C%E8%BF%94%E5%9B%9E"><span class="toc-number">10.7.</span> <span class="toc-text"> 过程调用和返回</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E8%AF%8D%E6%B3%95%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-number">11.</span> <span class="toc-text"> 11 词法自动化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">11.1.</span> <span class="toc-text"> 正则文法和正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%993-%E5%9E%8B%E6%96%87%E6%B3%95%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">11.1.1.</span> <span class="toc-text"> 正则（3 型）文法转换为正则表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA"><span class="toc-number">11.2.</span> <span class="toc-text"> 有穷自动机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%88%AB"><span class="toc-number">11.2.1.</span> <span class="toc-text"> 类别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E7%9A%84%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-dfa"><span class="toc-number">11.2.1.1.</span> <span class="toc-text"> 确定的有穷自动机 DFA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E7%A1%AE%E5%AE%9A%E7%9A%84%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-nfa"><span class="toc-number">11.2.1.2.</span> <span class="toc-text"> 不确定的有穷自动机 NFA</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nfa-%E7%9A%84%E7%A1%AE%E5%AE%9A%E5%8C%96"><span class="toc-number">11.2.2.</span> <span class="toc-text"> NFA 的确定化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dfa-%E6%9C%80%E5%B0%8F%E5%8C%96"><span class="toc-number">11.2.3.</span> <span class="toc-text"> DFA 最小化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA%E7%9A%84%E7%AD%89%E4%BB%B7%E6%80%A7"><span class="toc-number">11.2.4.</span> <span class="toc-text"> 正则表达式和有穷自动机的等价性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95"><span class="toc-number">11.2.4.1.</span> <span class="toc-text"> 有穷自动机 → 正则文法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95-%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA"><span class="toc-number">11.2.4.2.</span> <span class="toc-text"> 正则文法 → 有穷自动机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E5%BC%8F-%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA"><span class="toc-number">11.2.4.3.</span> <span class="toc-text"> 正则式 → 有穷自动机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-%E6%AD%A3%E5%88%99%E5%BC%8F"><span class="toc-number">11.2.4.4.</span> <span class="toc-text"> 有穷自动机 → 正则式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95-%E6%AD%A3%E5%88%99%E5%BC%8F"><span class="toc-number">11.2.4.5.</span> <span class="toc-text"> 正则文法 → 正则式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E5%BC%8F-%E6%AD%A3%E5%88%99%E6%96%87%E6%B3%95"><span class="toc-number">11.2.4.6.</span> <span class="toc-text"> 正则式 → 正则文法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">11.3.</span> <span class="toc-text"> 词法分析程序的自动生成器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-number">12.</span> <span class="toc-text"> 12 语法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ll-%E5%88%86%E6%9E%90%E6%B3%95"><span class="toc-number">12.1.</span> <span class="toc-text"> LL 分析法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">12.1.1.</span> <span class="toc-text"> 组成部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%A1%A8"><span class="toc-number">12.1.1.1.</span> <span class="toc-text"> 分析表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E6%A0%88"><span class="toc-number">12.1.1.2.</span> <span class="toc-text"> 符号栈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-number">12.1.1.3.</span> <span class="toc-text"> 执行程序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%88%86%E6%9E%90%E8%A1%A8"><span class="toc-number">12.1.2.</span> <span class="toc-text"> 构造分析表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ll1%E6%96%87%E6%B3%95"><span class="toc-number">12.1.3.</span> <span class="toc-text"> LL(1)文法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E8%BF%9B-%E5%BD%92%E7%BA%A6%E5%88%86%E6%9E%90"><span class="toc-number">12.2.</span> <span class="toc-text"> 移进-归约分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E5%88%86%E6%9E%90"><span class="toc-number">12.3.</span> <span class="toc-text"> 算符优先分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E6%96%87%E6%B3%95-opg"><span class="toc-number">12.3.1.</span> <span class="toc-text"> 算符优先文法 OPG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E4%BC%98%E5%85%88%E5%85%B3%E7%B3%BB%E7%9F%A9%E9%98%B5"><span class="toc-number">12.3.2.</span> <span class="toc-text"> 构造优先关系矩阵</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lr-%E5%88%86%E6%9E%90%E6%B3%95"><span class="toc-number">12.4.</span> <span class="toc-text"> LR 分析法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86-2"><span class="toc-number">12.4.1.</span> <span class="toc-text"> 组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%A1%A8%E7%A7%8D%E7%B1%BB"><span class="toc-number">12.4.2.</span> <span class="toc-text"> 分析表种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0-lr0"><span class="toc-number">12.4.3.</span> <span class="toc-text"> 构造 LR(0)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14-%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-number">13.</span> <span class="toc-text"> 14 代码优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="toc-number">13.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%9D%97%E5%92%8C%E6%B5%81%E5%9B%BE"><span class="toc-number">13.2.</span> <span class="toc-text"> 基本块和流图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%9D%97"><span class="toc-number">13.2.1.</span> <span class="toc-text"> 基本块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%92%E5%88%86%E5%9F%BA%E6%9C%AC%E5%9D%97"><span class="toc-number">13.2.1.1.</span> <span class="toc-text"> 划分基本块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E5%9B%BE"><span class="toc-number">13.2.2.</span> <span class="toc-text"> 流图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%9A%84%E6%9F%A5%E6%89%BE"><span class="toc-number">13.2.2.1.</span> <span class="toc-text"> 循环的查找</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E4%BC%98%E5%8C%96"><span class="toc-number">13.3.</span> <span class="toc-text"> 局部优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E4%BB%A3%E6%95%B0%E6%80%A7%E8%B4%A8"><span class="toc-number">13.3.1.</span> <span class="toc-text"> 利用代数性质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E9%99%A4%E5%85%AC%E5%85%B1%E5%AD%90%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">13.3.2.</span> <span class="toc-text"> 消除公共子表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA-dag-%E5%9B%BE%E7%AE%97%E6%B3%95"><span class="toc-number">13.3.2.1.</span> <span class="toc-text"> 构建 DAG 图算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E-dag-%E5%9B%BE%E5%AF%BC%E5%87%BA%E4%BB%A3%E7%A0%81%E7%9A%84%E7%AE%97%E6%B3%95"><span class="toc-number">13.3.2.2.</span> <span class="toc-text"> 从 DAG 图导出代码的算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E4%BC%98%E5%8C%96"><span class="toc-number">13.4.</span> <span class="toc-text"> 全局优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E5%88%86%E6%9E%90"><span class="toc-number">13.4.1.</span> <span class="toc-text"> 数据流分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%B0%E8%BE%BE%E5%AE%9A%E4%B9%89%E5%88%86%E6%9E%90"><span class="toc-number">13.4.1.1.</span> <span class="toc-text"> 到达定义分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B4%BB%E8%B7%83%E5%8F%98%E9%87%8F%E5%88%86%E6%9E%90"><span class="toc-number">13.4.1.2.</span> <span class="toc-text"> 活跃变量分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%BB%E4%BB%A3%E7%A0%81%E6%B6%88%E9%99%A4"><span class="toc-number">13.4.1.2.1.</span> <span class="toc-text"> 死代码消除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%A4%8D%E5%88%B6%E4%BC%A0%E6%92%AD"><span class="toc-number">13.4.2.</span> <span class="toc-text"> 全局复制传播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-%E4%BD%BF%E7%94%A8%E9%93%BE"><span class="toc-number">13.4.3.</span> <span class="toc-text"> 定义-使用链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9B%BE"><span class="toc-number">13.4.3.1.</span> <span class="toc-text"> 冲突图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-%E4%BD%BF%E7%94%A8%E9%93%BE-2"><span class="toc-number">13.4.3.2.</span> <span class="toc-text"> 定义-使用链</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96"><span class="toc-number">13.4.4.</span> <span class="toc-text"> 循环优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E4%B8%8D%E5%8F%98%E5%BC%8F%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A4%96%E6%8F%90"><span class="toc-number">13.4.4.1.</span> <span class="toc-text"> 循环不变式的代码外提</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%B1%95%E5%BC%80"><span class="toc-number">13.4.4.2.</span> <span class="toc-text"> 循环展开</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%92%E7%BA%B3%E5%8F%98%E9%87%8F%E7%9A%84%E4%BC%98%E5%8C%96%E5%92%8C%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="toc-number">13.4.4.3.</span> <span class="toc-text"> 归纳变量的优化和条件判断的替换</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#15-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">14.</span> <span class="toc-text"> 15 目标代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3%E5%BE%AE%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B"><span class="toc-number">14.1.</span> <span class="toc-text"> 现代微处理器体系结构简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%9E%84"><span class="toc-number">14.1.1.</span> <span class="toc-text"> 指令集架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%B1%82%E6%AC%A1%E6%9E%B6%E6%9E%84"><span class="toc-number">14.1.2.</span> <span class="toc-text"> 存储层次架构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4"><span class="toc-number">14.2.</span> <span class="toc-text"> 地址空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%A0%88"><span class="toc-number">14.2.1.</span> <span class="toc-text"> 程序运行栈</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E5%88%86%E9%85%8D%E5%92%8C%E6%8C%87%E6%B4%BE"><span class="toc-number">14.3.</span> <span class="toc-text"> 寄存器的分配和指派</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AF%84%E5%AD%98%E5%99%A8%E5%88%86%E9%85%8D"><span class="toc-number">14.3.1.</span> <span class="toc-text"> 全局寄存器分配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0"><span class="toc-number">14.3.1.1.</span> <span class="toc-text"> 引用计数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%9D%80%E8%89%B2%E7%AE%97%E6%B3%95"><span class="toc-number">14.3.1.2.</span> <span class="toc-text"> 图着色算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8F%91%E5%BC%8F%E5%9B%BE%E7%9D%80%E8%89%B2"><span class="toc-number">14.3.1.3.</span> <span class="toc-text"> 启发式图着色</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%AF%84%E5%AD%98%E5%99%A8%E5%88%86%E9%85%8D"><span class="toc-number">14.3.2.</span> <span class="toc-text"> 临时寄存器分配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%AF%84%E5%AD%98%E5%99%A8%E6%B1%A0"><span class="toc-number">14.3.2.1.</span> <span class="toc-text"> 临时寄存器池</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#final"><span class="toc-number">15.</span> <span class="toc-text"> final</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A1%AB%E7%A9%BA"><span class="toc-number">15.1.</span> <span class="toc-text"> 填空</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7%E9%A2%98"><span class="toc-number">15.2.</span> <span class="toc-text"> 大题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">15.2.1.</span> <span class="toc-text"> 正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E6%96%87%E6%B3%95"><span class="toc-number">15.2.2.</span> <span class="toc-text"> 算符优先文法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E8%A1%A8%E5%92%8C%E8%BF%90%E8%A1%8C%E6%A0%88"><span class="toc-number">15.2.3.</span> <span class="toc-text"> 符号表和运行栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ll1%E6%96%87%E6%B3%95-2"><span class="toc-number">15.2.4.</span> <span class="toc-text"> LL(1)文法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lr-%E5%88%86%E6%9E%90%E6%B3%95-2"><span class="toc-number">15.2.5.</span> <span class="toc-text"> LR 分析法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-number">15.2.6.</span> <span class="toc-text"> 代码优化</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">bubble</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">5</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">6</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">2</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.cnblogs.com/qiuerOTO">全世界最好的xqjj</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/background.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">bubble's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">编译</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2024-12-18</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/">大三上</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">15.4k</span><span class="post-meta__separator">|</span><span>阅读时长: 51 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><meta name="referrer" content="no-referrer" />
<h1 id="1-概论"><a class="markdownIt-Anchor" href="#1-概论"></a> 1 概论</h1>
<p>程序设计语言：语法，语义，语用</p>
<h2 id="编译的起源程序设计语言的发展"><a class="markdownIt-Anchor" href="#编译的起源程序设计语言的发展"></a> 编译的起源：程序设计语言的发展</h2>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411282020248.png" alt="img" /></p>
<p>低级语言：字位码、机器语言、汇编语言</p>
<p>高级语言从应用角度分类：</p>
<ul>
<li>基础语言：FORTRAN，COBOL，BASIC，ALGOL</li>
<li>结构化语言：具有很强的过程结构和数据结构能力，PASCAL，C，Ada</li>
<li>专用语言：为特殊应用而设计，APL，Forth</li>
</ul>
<h2 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h2>
<ul>
<li>
<p>源程序：用汇编语言或高级语言编写的程序</p>
</li>
<li>
<p>目标程序：用目标语言（介于源语言和机器语言之间的语言）所表示的程序</p>
</li>
</ul>
<p>翻译程序：将源程序转换为目标程序</p>
<p><mark>源程序是翻译程序的输入，目标程序是翻译程序的输出</mark></p>
<p>编译程序：一次编译可多次执行</p>
<p>解释程序：对源程序进行解释执行的程序，并不生成目标程序</p>
<p>编译-解释执行：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411282126789.png" alt="image-20241128212610735" /></p>
<h2 id="编译过程和编译程序构造"><a class="markdownIt-Anchor" href="#编译过程和编译程序构造"></a> 编译过程和编译程序构造</h2>
<h3 id="编译过程"><a class="markdownIt-Anchor" href="#编译过程"></a> 编译过程</h3>
<blockquote>
<p>将高级语言程序翻译为等价的目标程序，<mark>翻译的实质：语义的等价性</mark></p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409120823813.png" alt="image-20240912082329724" /></p>
<ul>
<li>词法分析：分析和识别单词。</li>
<li>语法分析：根据语法规则，识别出各种语法成分</li>
<li>语义分析、生成中间代码：对识别出的各种语法成分进行语义分析，并生成中间代码（介于源语言和目标语言的中间语言形式）
<ul>
<li>便于优化处理，便于编译程序的移植</li>
</ul>
</li>
<li>生成目标程序</li>
</ul>
<p><mark>错误处理，符号表管理每遍都要</mark></p>
<h3 id="编译程序构造"><a class="markdownIt-Anchor" href="#编译程序构造"></a> 编译程序构造</h3>
<p>五个阶段都需要<strong>建表和查表</strong>和<strong>出错处理</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291108601.png" alt="image-20241129110807526" /></p>
<p>遍：对源程序（包括中间形式）从头到尾扫描一遍。</p>
<blockquote>
<p>⚠️区分遍与基本阶段的区别：</p>
<ul>
<li>基本阶段：将源程序翻译为目标程序在逻辑上要完成的工作</li>
<li>遍：指完成上述基本阶段要经过一次或几次扫描处理</li>
</ul>
<p><mark>可能一次扫描完成多个基本阶段</mark></p>
</blockquote>
<h4 id="前端和后端"><a class="markdownIt-Anchor" href="#前端和后端"></a> 前端和后端</h4>
<ul>
<li>对源程序的分析，并生成与其等价的中间形式（<mark>前端：与源语言有关</mark>）
<ul>
<li>词法分析：将字符串形式的源程序分解为具有独立语法意义的单词符号 token</li>
<li>语法分析：根据语法规则将单词进一步组合成大的语法类或语法成分，如变量声明、表达式、语句、函数和过程等，<strong>生成语法数</strong></li>
<li>语义分析：对通过语法分析程序识别出来的语法成分进一步进行语义分析处理（计算），识别他们的含义，同时进行语义检查</li>
</ul>
</li>
<li>生成目标程序（<mark>后端：与目标机有关</mark>）
<ul>
<li>代码生成：将源程序的中间形式转换为汇编语言或者机器语言</li>
<li>代码优化：在确保源代码功能不变的前提下，获得更高效的目标程序</li>
</ul>
</li>
<li>符号表管理：保存每个标识符及其属性信息，在符号表的表项中登录标识符的属性</li>
<li>出错处理：检测错误，向用户报错错误性质和位置，以便用户修改源程序</li>
</ul>
<h1 id="2-文法和语言"><a class="markdownIt-Anchor" href="#2-文法和语言"></a> 2 文法和语言</h1>
<p>正闭包：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mo>+</mo></msup><mo>=</mo><msup><mi>A</mi><mn>1</mn></msup><mo>∪</mo><msup><mi>A</mi><mn>2</mn></msup><mo>∪</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>∪</mo><msup><mi>A</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">A^+=A^1\cup A^2\cup ...\cup A^n
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.821331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>闭包：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mo>∗</mo></msup><mo>=</mo><msup><mi>A</mi><mn>0</mn></msup><mo>∪</mo><msup><mi>A</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">A^*=A^0\cup A^+
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.821331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></span></p>
<blockquote>
<p>Q：为什么对符号、符号串、符号串集合以及它们的运算感兴趣？</p>
<p>A：把单词看作符号，句子便是符号串。而所有句子的集合就是符号串集合。</p>
</blockquote>
<h2 id="文法的非形式定义"><a class="markdownIt-Anchor" href="#文法的非形式定义"></a> 文法的非形式定义</h2>
<blockquote>
<p>对语言结构的定义与描述，也称语法。</p>
</blockquote>
<p>语法规则：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>:</mo><mo>=</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">:==</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span>表示“由…组成”。</p>
<p>由规则推导句子：从一个要识别的符号开始推导，用相应规则的右部替代规则的左部，每次仅用一条，<strong>直到所有带&lt;&gt;的非终结符号都被终结符号替代</strong>。</p>
<p><mark>最左归约=最右推导=规范推导</mark></p>
<p>推导序列：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409120907414.png" alt="image-20240912090751388" /></p>
<ul>
<li>最左推导：从最左的语法成分进行推导</li>
<li>最右推导：同理</li>
</ul>
<p><mark>文法是在形式上对句子结构的定义与描述，未涉及语义</mark></p>
<p>语法推导树：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409120908250.png" alt="image-20240912090839201" /></p>
<h2 id="文法和语言的形式定义"><a class="markdownIt-Anchor" href="#文法和语言的形式定义"></a> 文法和语言的形式定义</h2>
<h3 id="文法"><a class="markdownIt-Anchor" href="#文法"></a> 文法</h3>
<p>文法：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>P</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>V</mi><mi>n</mi></msub><mo>:</mo><mi mathvariant="normal">非</mi><mi mathvariant="normal">终</mi><mi mathvariant="normal">结</mi><mi mathvariant="normal">符</mi><mi mathvariant="normal">号</mi><mi mathvariant="normal">集</mi><mspace linebreak="newline"></mspace><msub><mi>V</mi><mi>t</mi></msub><mo>:</mo><mi mathvariant="normal">终</mi><mi mathvariant="normal">结</mi><mi mathvariant="normal">符</mi><mi mathvariant="normal">号</mi><mi mathvariant="normal">集</mi><mspace linebreak="newline"></mspace><mi>V</mi><mo>=</mo><msub><mi>V</mi><mi>n</mi></msub><mo>+</mo><msub><mi>V</mi><mi>t</mi></msub><mo>:</mo><mi mathvariant="normal">文</mi><mi mathvariant="normal">法</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">字</mi><mi mathvariant="normal">汇</mi><mi mathvariant="normal">表</mi><mspace linebreak="newline"></mspace><mi>P</mi><mo>:</mo><mi mathvariant="normal">产</mi><mi mathvariant="normal">生</mi><mi mathvariant="normal">式</mi><mi mathvariant="normal">或</mi><mi mathvariant="normal">规</mi><mi mathvariant="normal">则</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">结</mi><mi mathvariant="normal">合</mi><mspace linebreak="newline"></mspace><mi>Z</mi><mo>:</mo><mi mathvariant="normal">开</mi><mi mathvariant="normal">始</mi><mi mathvariant="normal">符</mi><mi mathvariant="normal">号</mi><mi mathvariant="normal">，</mi><mi>Z</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">G=(V_n,V_t,P,Z)\\
V_n:非终结符号集\\
V_t:终结符号集\\
V=V_n+V_t:文法的字汇表\\
P:产生式或规则的结合\\
Z:开始符号，Z\in V_n
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">非</span><span class="mord cjk_fallback">终</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">符</span><span class="mord cjk_fallback">号</span><span class="mord cjk_fallback">集</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">终</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">符</span><span class="mord cjk_fallback">号</span><span class="mord cjk_fallback">集</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">文</span><span class="mord cjk_fallback">法</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">字</span><span class="mord cjk_fallback">汇</span><span class="mord cjk_fallback">表</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">产</span><span class="mord cjk_fallback">生</span><span class="mord cjk_fallback">式</span><span class="mord cjk_fallback">或</span><span class="mord cjk_fallback">规</span><span class="mord cjk_fallback">则</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">合</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord cjk_fallback">开</span><span class="mord cjk_fallback">始</span><span class="mord cjk_fallback">符</span><span class="mord cjk_fallback">号</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>规则：有序对（U，x）。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">U\rightarrow x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span></p>
<p>文法的 BNF 表示（或）：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">∣</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">U::=x|y|...|z
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></p>
<h4 id="推导"><a class="markdownIt-Anchor" href="#推导"></a> 推导</h4>
<ul>
<li>直接推导：使用一次规则即可推导出</li>
<li>间接推导：存在一个直接推导序列，<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409171510482.png" alt="image-20240917151020396" style="zoom:50%;" /></li>
<li>最左/右推导：总是从最左/右的语法成分进行推导</li>
<li>规范推导就是最右推导（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>∈</mo><msubsup><mi>V</mi><mi>t</mi><mo>∗</mo></msubsup></mrow><annotation encoding="application/x-tex">y\in V_t^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.935696em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-2.4530000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>说明 y 一定是终结符号，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>一定是右边第一个非终结符号）<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409171512336.png" alt="image-20240917151222306" /></li>
</ul>
<p>通过若干步推导（可以是 0）：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409171517950.png" alt="image-20240917151534329" /></p>
<h3 id="语言"><a class="markdownIt-Anchor" href="#语言"></a> 语言</h3>
<ol>
<li>句型：如果可以通过若干步推导出 x（可以包含终结符，也可以包含非终结符，也可以是空串）</li>
<li>句子：不包含终结符的句型</li>
<li>语言：由文法 G 生成的所有句子集合</li>
</ol>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409120929932.png" alt="image-20240912092957897" /></p>
<p>形式语言理论证明以下两点：</p>
<p>（1）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>→</mo><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G\rightarrow L(G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span></span></span></span>：已知文法，求语言，通过推导</p>
<p>（2）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>→</mo><msub><mi>G</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>G</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>G</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">L(G)\rightarrow G_1,G_2,...,G_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：已知语言，构造文法，凭经验</p>
<blockquote>
<p>已知语言，构造文法：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mi>a</mi><msup><mi>b</mi><mi>n</mi></msup><mi>a</mi><mi mathvariant="normal">∣</mi><mi>n</mi><mo>≥</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{ab^na |n\geq1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mn>1</mn></msub><mo stretchy="false">[</mo><mi>Z</mi><mo stretchy="false">]</mo><mo>:</mo><mi>Z</mi><mo>→</mo><mi>a</mi><mi>B</mi><mi>a</mi><mo separator="true">,</mo><mi>B</mi><mo>→</mo><mi>b</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mi>B</mi><mspace linebreak="newline"></mspace><msub><mi>G</mi><mn>2</mn></msub><mo stretchy="false">[</mo><mi>Z</mi><mo stretchy="false">]</mo><mo>:</mo><mi>Z</mi><mo>→</mo><mi>a</mi><mi>B</mi><mi>a</mi><mo separator="true">,</mo><mi>B</mi><mo>→</mo><mi>b</mi><mi mathvariant="normal">∣</mi><mi>B</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">G_1[Z]:Z\rightarrow aBa,B\rightarrow b|bB\\
G_2[Z]:Z\rightarrow aBa,B\rightarrow b|Bb
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">b</span></span></span></span></span></p>
<p>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>=</mo><mi>L</mi><mo stretchy="false">(</mo><msup><mi>G</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(G)=L(G&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>G</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">G&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>为等价文法。</p>
<p><mark>证明等价文法可转化为证明集合等价</mark></p>
</blockquote>
<h4 id="递归文法"><a class="markdownIt-Anchor" href="#递归文法"></a> 递归文法</h4>
<p>可用有穷条规则，定义无穷语言。</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409121006517.png" alt="image-20240912100623468" /></p>
<h4 id="句型的短语-简单短语和句柄"><a class="markdownIt-Anchor" href="#句型的短语-简单短语和句柄"></a> 句型的短语、简单短语和句柄</h4>
<p><strong>相对于句型而言！！！</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409171526412.png" alt="image-20240917152605376" /></p>
<ol>
<li>
<p>短语：前面句型中的某个非终结符所能推出的符号串，由每颗子树的叶子组成</p>
<p><mark>任何句型本身一定是相对于识别符号 Z 的短语</mark></p>
<p><img src="https://img2018.cnblogs.com/blog/1483449/201906/1483449-20190621214719278-2019466211.png" alt="" /></p>
<p><img src="https://img2018.cnblogs.com/blog/1483449/201906/1483449-20190621214726660-1595534738.png" alt="" /></p>
</li>
<li>
<p>简单子树：树的高度为两层的子树</p>
</li>
<li>
<p>简单短语：简单子树的叶子结点</p>
</li>
<li>
<p>句柄：最左简单短语，最左简单子树的叶子</p>
</li>
</ol>
<h2 id="语法树与二义性文法"><a class="markdownIt-Anchor" href="#语法树与二义性文法"></a> 语法树与二义性文法</h2>
<h3 id="推导与语法推导树"><a class="markdownIt-Anchor" href="#推导与语法推导树"></a> 推导与语法推导树</h3>
<p>语法推导树：根结点——识别符号，中间结点——非终结符，叶结点——终结符</p>
<p>子树：某个结点连同向下生长的部分</p>
<p>规范归约：对句型中==最左简单短语（句柄）==进行的归约</p>
<h3 id="二义性"><a class="markdownIt-Anchor" href="#二义性"></a> 二义性</h3>
<blockquote>
<p>若对于一个文法的某一个句子，存在两颗不同的语法树，即存在着两个不同的规范推导（不同的句柄），则是二义性文法</p>
</blockquote>
<p><mark>二义性：句柄不唯一</mark></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409171535664.png" alt="image-20240917153517619" /></p>
<p><mark>二义性不可通过有限步骤判定</mark></p>
<blockquote>
<p>扩充的 BNF 表示：</p>
<ul>
<li>花括号{}使用：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mi>t</mi><msubsup><mo stretchy="false">}</mo><mi>n</mi><mi>m</mi></msubsup></mrow><annotation encoding="application/x-tex">\{t\}^m_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">t</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>表示符号串 t 可自重复连接 n 到 m 次，如果省略 n、m，表示可连接 0-任意多次</li>
<li>方括号[]使用：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[t]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">t</span><span class="mclose">]</span></span></span></span>表示符号串 t 可有可无</li>
<li>圆括号()使用：在规则中提取因子<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi>w</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi>z</mi><mo>=</mo><mi>x</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">∣</mi><mi>w</mi><mi mathvariant="normal">∣</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">xy|xw|xz=x(y|w|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></li>
</ul>
</blockquote>
<p><strong>有关文法的实用限制</strong></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">U::=U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>这样的规则即为有害规则。</p>
<p>如果文法中无有害规则或多余规则，则称文法是压缩过的。</p>
<p><strong>文法和语言分类</strong></p>
<ul>
<li>
<p>0 型：短语结构文法，左部右部均可以是符号串，一个短语可以产生另一个短语，可被图灵机接受</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>u</mi><mo>→</mo><mi>v</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>+</mo></msup><mo separator="true">,</mo><mi>V</mi><mo>=</mo><msub><mi>V</mi><mi>n</mi></msub><mo>∪</mo><msub><mi>V</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">P:u\rightarrow v,其中u\in V^+,V=V_n\cup V_t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.015771em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>1 型：上下文有关，只有在 x，y 的情况下才可以改写，由线性界限自动机</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>x</mi><mi>U</mi><mi>y</mi><mo>→</mo><mi>x</mi><mi>u</mi><mi>y</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>U</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">P:xUy\rightarrow xuy,其中U\in V_n,x,y,u\in V^*
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>2 型：上下文无关文法，1 型文法<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，由下推自动机接受</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>U</mi><mo>→</mo><mi>u</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>U</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">P:U\rightarrow u,其中U\in V_n,u\in V^*
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>3 型：由有穷自动机接受<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291703041.png" alt="image-20241129170313345" /></p>
</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291704436.png" alt="image-20241129170345770" /></p>
<h1 id="3-词法分析"><a class="markdownIt-Anchor" href="#3-词法分析"></a> 3 词法分析</h1>
<blockquote>
<p>识别单词，返回单词的类别和值</p>
</blockquote>
<p>词法分析程序的功能：</p>
<ul>
<li>词法分析：根据词法规则识别及组合单词，进行词法检查</li>
<li>对数字常数完成数字字符串到二进制数值的转化</li>
<li>删去空格和注释</li>
</ul>
<p>实现方案：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409161013833.png" alt="image-20240916101309712" /></p>
<p>保存单词：类别编码，单词值</p>
<h2 id="正则文法和状态图"><a class="markdownIt-Anchor" href="#正则文法和状态图"></a> 正则文法和状态图</h2>
<h3 id="画状态图"><a class="markdownIt-Anchor" href="#画状态图"></a> 画状态图</h3>
<p><mark>自底向上，规约过程</mark></p>
<ul>
<li>每个非终结符设一个状态，并设置开始状态 S</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>→</mo><mi>T</mi><mo separator="true">,</mo><mi>Q</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>T</mi><mo>∈</mo><msub><mi>V</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Q\rightarrow T,Q\in V_n,T\in V_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291730281.png" alt="image-20241129173050231" style="zoom: 33%;" /></li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>→</mo><mi>R</mi><mi>T</mi><mo separator="true">,</mo><mi>R</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>T</mi><mo>∈</mo><msub><mi>V</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Q\rightarrow RT,R\in V_n,T\in V_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291731048.png" alt="image-20241129173141000" style="zoom:33%;" /></li>
<li>增加终止状态标志（双圈）</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231035365.png" alt="image-20241023103510253" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291737171.png" alt="image-20241129173721121" /></p>
<h2 id="构造词法分析程序"><a class="markdownIt-Anchor" href="#构造词法分析程序"></a> 构造词法分析程序</h2>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291739774.png" alt="image-20241129173915717" /></p>
<h1 id="4-语法分析"><a class="markdownIt-Anchor" href="#4-语法分析"></a> 4 语法分析</h1>
<blockquote>
<p>根据文法规则，从源程序单词符号串中识别出语法成分，并进行语法检查</p>
</blockquote>
<h2 id="自顶向下分析"><a class="markdownIt-Anchor" href="#自顶向下分析"></a> 自顶向下分析</h2>
<blockquote>
<p>主要问题：</p>
<ul>
<li>左递归问题：不能直接处理具有左递归性的文法</li>
<li>回溯问题：消耗时间</li>
</ul>
<p>主要方法：</p>
<ul>
<li>递归子程序法</li>
<li>LL 分析法</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409201516934.png" alt="image-20240920151625851" /></p>
<blockquote>
<p>给定符号串 S 若预测是某一语法成分，则可根据该语法成分的文法，设法为 S 构造一颗语法树，若成功，则 S 最终被识别为某一语法成分，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>∈</mo><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">[</mo><mi>Z</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S\in L(G[Z])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">[</mo><mi>Z</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">G[Z]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">]</span></span></span></span>为某语法成分的文法，若不成功，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi mathvariant="normal">∉</mi><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">[</mo><mi>Z</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S\notin L(G[Z])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409221630180.png" alt="image-20240922163013082" /></p>
<h3 id="存在问题"><a class="markdownIt-Anchor" href="#存在问题"></a> 存在问题</h3>
<h4 id="左递归问题"><a class="markdownIt-Anchor" href="#左递归问题"></a> 左递归问题</h4>
<blockquote>
<p>不能处理具有左递归性的文法，必须要消除文法的左递归。</p>
</blockquote>
<p><strong>消除左递归</strong>：</p>
<ol>
<li>
<p>（提因子）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>x</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi>w</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">U::=xy|xw|xz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span> 可替换为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>x</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">∣</mi><mi>w</mi><mi mathvariant="normal">∣</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">U::=x(y|w|z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></p>
<p>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">U\rightarrow x|xy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>，应该写为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>x</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">∣</mi><mi>ε</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">U\rightarrow x(y|\varepsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathdefault">ε</span><span class="mclose">)</span></span></span></span>。</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">∣</mi><mi>z</mi><mi mathvariant="normal">∣</mi><mi>U</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">U::=x|y|...|z|Uv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span> 可替换为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">∣</mi><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">{</mo><mi>v</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">U::=(x|y|...|z)\{v\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">}</span></span></span></span>，将具有直接左递归的右部选择位于最后可取无限次</p>
</li>
<li>
<p>左递归改为右递归<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409221647967.png" alt="image-20240922164654014" /></p>
</li>
<li>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409221655034.png" alt="image-20240922165545003" /></p>
</li>
</ol>
<h4 id="回溯问题"><a class="markdownIt-Anchor" href="#回溯问题"></a> 回溯问题</h4>
<blockquote>
<p>避免回溯必须保证：对文法的任何非终结符号，特别是对那些规则右部有多个选择的非终结符号，当要用它去匹配输入串时，它能够根据所面临的输入符号准确的用齐规则右部的某一个选择去执行任务，并且工作的结果应是确信无疑的。</p>
</blockquote>
<p>定义任一个选择<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>所可能推出的终结符号串的首符号集<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FIRST(a_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>需要满足：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>∩</mo><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi><mo stretchy="false">(</mo><mi>i</mi><mi mathvariant="normal">≠</mi><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FIRST(A_i)\cap FIRST(a_j)=\emptyset(i\neq j)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∅</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span></p>
<p><strong>消除回溯：</strong></p>
<ol>
<li>改写文法：对具有多个右部的规则反复提取左因子<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409221721447.png" alt="image-20240922172141399" /></li>
<li>超前扫描：若各选择的首符号相交，向前侦查各输入符号串的第二个、第三个来确定要选择的目标<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409221723881.png" alt="image-20240922172342826" /></li>
</ol>
<p>为了不采取超前扫描的前提下实现不带回溯的自顶向下分析，需要满足两个条件：</p>
<ul>
<li>文法非左递归</li>
<li>对文法的任一非终结符，若其规则右部有多个选择时，各个选择所推出的终结符号的首符号集要两两不相交</li>
</ul>
<p>不带回溯的充分必要条件：对于 G 的每个非终结符 A 的任意两条规则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>α</mi><mi mathvariant="normal">∣</mi><mi>β</mi></mrow><annotation encoding="application/x-tex">A::=\alpha|\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><mi>β</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">FIRST(\alpha)\cap FIRST(\beta)=\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi><mo>→</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\beta\rightarrow\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>F</mi><mi>O</mi><mi>L</mi><mi>L</mi><mi>O</mi><mi>W</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">FIRST(\alpha)\cap FOLLOW(A)=\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault">L</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></li>
</ul>
<h3 id="递归下降子程序法"><a class="markdownIt-Anchor" href="#递归下降子程序法"></a> 递归下降子程序法</h3>
<blockquote>
<p>对每一个非终结符都编一个分析程序，当根据文法和当时的输入符号预测到要用某个非终结符区匹配输入串时，就调用该非终结符的分析程序</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231113520.png" alt="image-20241023111322458" /></p>
<h2 id="自底向上分析"><a class="markdownIt-Anchor" href="#自底向上分析"></a> 自底向上分析</h2>
<blockquote>
<p>主要问题：</p>
<ul>
<li>句柄的识别问题</li>
</ul>
<p>主要方法：</p>
<ul>
<li>算符优先分析法</li>
<li>LR 分析法</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291847149.png" alt="image-20241129184715105" /></p>
<h1 id="5-符号表管理技术"><a class="markdownIt-Anchor" href="#5-符号表管理技术"></a> 5 符号表管理技术</h1>
<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2>
<blockquote>
<p>符号表：编译程序用来记录源程序中各种名字的特性信息</p>
<p>名字：程序名、过程名、函数名、用户定义类型名、变量名…</p>
<p>特性信息：种类、类型、维数、参数个数</p>
<p><strong>建表和查表的必要性</strong>：</p>
<ol>
<li>变量声明时，将名字及其信息登录到符号表中，同时给变量分配存储单元，并将存储单元地址登录在符号表中</li>
<li>当编译到引用变量的位置时，需要查符号表取得相关信息</li>
</ol>
</blockquote>
<ul>
<li>填表：说明|定义语句时，将名字和信息填入符号表中</li>
<li>查表：
<ul>
<li>检查同一作用域内名字是否重复定义</li>
<li>检查名字的种类与说明是否一致</li>
<li>对于强类型语言，检查表达式中各变量的类型是否一致</li>
<li>生成目标指令时，取得所需要的地址</li>
</ul>
</li>
</ul>
<h2 id="符号表的组织与内容"><a class="markdownIt-Anchor" href="#符号表的组织与内容"></a> 符号表的组织与内容</h2>
<table>
<thead>
<tr>
<th>名字</th>
<th>特性信息</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>种类（简单变量、函数、过程、数组、标号、参数）<br/>类型（整形、浮点型、字符型、指针）<br/>性质（变量形参、值形参）<br/>值<br/>地址<br/>大小</td>
</tr>
</tbody>
</table>
<p>组织形式：</p>
<ul>
<li>统一符号表：按信息量最大的设计，浪费空间</li>
<li>不同种类的名字分别建立：节省空间，但查表不便</li>
<li>这种：大部分在一张表，特殊信息另设附表，用指针连接</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409222122115.png" alt="image-20240922212130510" /></p>
<h2 id="非分程序结构语言的符号表组织"><a class="markdownIt-Anchor" href="#非分程序结构语言的符号表组织"></a> 非分程序结构语言的符号表组织</h2>
<blockquote>
<p>非分程序结构语言：每个可独立进行编译的程序单元是一个不包含有子模块的单一模块（所有标识符属于整个模块）</p>
</blockquote>
<h3 id="标识符"><a class="markdownIt-Anchor" href="#标识符"></a> 标识符</h3>
<p>作用域：</p>
<ul>
<li>全局：子程序名，函数名和公共区名</li>
<li>局部：程序单元中定义的变量</li>
</ul>
<p>组织：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409222149320.png" alt="image-20240922214928291" /></p>
<p>处理办法：</p>
<ul>
<li>子程序、函数名和公共区名填入全局符号表</li>
<li>在子程序声明部分读到标识符，造局部符号表
<ul>
<li>检查是否同名</li>
</ul>
</li>
<li>在语句部分读到标识符，查表
<ul>
<li>有局部表</li>
<li>无，查全局表——有即全局变量，无即没有定义</li>
</ul>
</li>
<li>程序单元结束：释放局部符号表</li>
<li>程序编译完成：释放全部符号表</li>
</ul>
<h3 id="组织方式"><a class="markdownIt-Anchor" href="#组织方式"></a> 组织方式</h3>
<ul>
<li>无序符号表：按扫描顺序建表，逐项查找<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n+1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>有序符号表：按变量名字典式排序
<ul>
<li>线性查表：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n+1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>折半查表：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\log_2n -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.93858em;vertical-align:-0.24414em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>Hash 表：符号表地址=Hash(标识符)。<mark>解决冲突</mark></li>
</ul>
</li>
</ul>
<h2 id="分程序结构语言的符号表组织"><a class="markdownIt-Anchor" href="#分程序结构语言的符号表组织"></a> 分程序结构语言的符号表组织</h2>
<blockquote>
<p>分程序结构语言：模块内可嵌入子模块</p>
</blockquote>
<p>处理办法：</p>
<ul>
<li>
<p>建查符号表要遵循标识符的作用域规定进行</p>
</li>
<li>
<p>建表：不能重复，不能遗漏</p>
</li>
<li>
<p>查表：按标识符作用域</p>
</li>
<li>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409222209703.png" alt="image-20240922220900659" /></p>
</li>
<li>
<p>程序声明部分读到标识符：</p>
<ul>
<li>查本层符号表有无同名，有——重复声明报错，无——填入符号表</li>
</ul>
</li>
<li>
<p>在语句中读到标识符：</p>
<ul>
<li>查本层符号表有无同名，有——已声明（局部量），无——是否是最外层，是——报错，否——转到外层（n-1）</li>
</ul>
</li>
<li>
<p>标准标识符的处理（不必声明可全程使用）</p>
<ul>
<li>单独建表|预先填入最外层</li>
</ul>
</li>
</ul>
<h3 id="栈式符号表"><a class="markdownIt-Anchor" href="#栈式符号表"></a> 栈式符号表</h3>
<p>当到达分程序结尾时，就弹出分程序的符号表。</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409222222308.png" alt="image-20240922222221248" /></p>
<p>分程序索引表指向每个分程序的开始（分程序名属于上一层符号表）：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202409222222540.png" alt="image-20240922222235482" /></p>
<h1 id="6-运行时的存储组织及管理"><a class="markdownIt-Anchor" href="#6-运行时的存储组织及管理"></a> 6 运行时的存储组织及管理</h1>
<blockquote>
<p>目标程序运行时所需存储空间的组织与管理以及源程序中变量存储空间的分配</p>
</blockquote>
<h2 id="静态存储分配"><a class="markdownIt-Anchor" href="#静态存储分配"></a> 静态存储分配</h2>
<blockquote>
<p>在<strong>编译阶段</strong>就可以确定变量在运行时的空间大小且不改变（但并不是所有数据空间大小都能在编译过程中确定—&gt;动态存储分配）</p>
</blockquote>
<p>目标地址：绝对地址（单任务环境）|相对地址</p>
<ul>
<li>开辟数据区（首地址加载时定）</li>
<li>按编译顺序给每个模块分配存储空间</li>
<li>在模块内部按顺序给变量分配存储，大小由类型决定</li>
<li>目标地址填入符号表</li>
</ul>
<p>FORTRAN 子程序完整数据区：</p>
<ul>
<li>变量</li>
<li>返回地址</li>
<li>形式参数</li>
<li>临时变量</li>
</ul>
<h2 id="动态存储分配"><a class="markdownIt-Anchor" href="#动态存储分配"></a> 动态存储分配</h2>
<blockquote>
<p>在<strong>目标程序运行</strong>时才分配，比如递归程序</p>
</blockquote>
<p><mark>栈式动态存储分配</mark></p>
<ul>
<li>进入一个过程时，在栈顶分配一个数据区</li>
<li>退出时撤销数据区</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301705619.png" alt="image-20241130170555549" /></p>
<p>从 M1(X/Y)处调用 M1，然后进入 AR2 数据区，…，然后依次退出，撤销数据区</p>
<h3 id="活动记录"><a class="markdownIt-Anchor" href="#活动记录"></a> 活动记录</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231439368.png" alt="image-20241023143920334" /></p>
<h4 id="局部数据区"><a class="markdownIt-Anchor" href="#局部数据区"></a> 局部数据区</h4>
<blockquote>
<p>存放模块中定义的各个局部变量</p>
</blockquote>
<h4 id="参数区"><a class="markdownIt-Anchor" href="#参数区"></a> 参数区</h4>
<blockquote>
<p>存放隐式参数和显式参数</p>
</blockquote>
<p>显式参数：形参数据区</p>
<p>隐式参数：</p>
<ul>
<li><code>prev abp</code>：存放调用模块记录基地址，函数执行完时，释放其数据区，数据区指针指向调用前的位置（前一个作用域）</li>
<li><code>ret addr</code>：返回地址，调用语句的下一条执行指令地址</li>
<li><code>ret value</code>：函数返回值，无则空</li>
</ul>
<h4 id="display-区"><a class="markdownIt-Anchor" href="#display-区"></a> display 区</h4>
<blockquote>
<p>存放<strong>各外层模块</strong>活动记录的基地址，为了访问外层变量。</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301711302.png" alt="image-20241130171132252" /></p>
<p>变量二元地址：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>B</mi><mi>L</mi><mi mathvariant="normal">、</mi><mi>O</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(BL、ON)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">L</span><span class="mord cjk_fallback">、</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mi>L</mi></mrow><annotation encoding="application/x-tex">BL</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">L</span></span></span></span>：变量声明所在的层次，可得到该层数据区开始地址</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">ON</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>：相对于显式参数区的开始位置的位移，即相对地址</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231548541.png" alt="image-20241023154842485" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231549040.png" alt="image-20241023154859982" /></p>
<p>当模块 4 执行完，就将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>b</mi><mi>p</mi><mo>=</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>v</mi><mtext> </mtext><mi>a</mi><mi>b</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">abp=prev\ abp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace"> </span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span></span></span></span>，然后就恢复到进入模块 4 的情况。</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301821342.png" alt="image-20241130182141262" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301822347.png" alt="image-20241130182205278" /></p>
<h3 id="建造-display-区的规则"><a class="markdownIt-Anchor" href="#建造-display-区的规则"></a> 建造 display 区的规则</h3>
<p>从<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>层模块调用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>层模块：</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j=i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>：复制<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>层的 display，在增加一个指向<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>层的基地址指针</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301823691.png" alt="image-20241130182304649" /></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>≤</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">j\leq i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>：将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>层模块的 display 区前面的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>个复制到第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>层</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301823141.png" alt="image-20241130182341092" /></p>
</li>
</ul>
<h3 id="运行时的地址计算"><a class="markdownIt-Anchor" href="#运行时的地址计算"></a> 运行时的地址计算</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231555919.png" alt="image-20241023155536866" /></p>
<h1 id="7-源程序的中间形式"><a class="markdownIt-Anchor" href="#7-源程序的中间形式"></a> 7 源程序的中间形式</h1>
<h2 id="波兰表示"><a class="markdownIt-Anchor" href="#波兰表示"></a> 波兰表示</h2>
<blockquote>
<p>设一个操作符栈，如果是操作数则立即输出，如果是操作符则与栈顶比较（空栈优先级最低），如果栈顶优先级更高则输出栈顶，反之则压入栈中。</p>
</blockquote>
<p>语法树角度：后序遍历</p>
<h3 id="if-语句"><a class="markdownIt-Anchor" href="#if-语句"></a> if 语句</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>f</mi><mo>&lt;</mo><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mo>&gt;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mo>&lt;</mo><mi>s</mi><mi>t</mi><mi>m</mi><msub><mi>t</mi><mn>1</mn></msub><mo>&gt;</mo><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mo>&lt;</mo><mi>s</mi><mi>t</mi><mi>m</mi><msub><mi>t</mi><mn>2</mn></msub><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">if&lt;expr&gt;then&lt;stmt_1&gt;else&lt;stmt_2&gt;
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span></span></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231628714.png" alt="image-20241023162810674" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231629485.png" alt="image-20241023162905435" /></p>
<h3 id="中间代码生成"><a class="markdownIt-Anchor" href="#中间代码生成"></a> 中间代码生成</h3>
<p>expr 结束有跳到 else 的标签，stmt1 结束有跳到 if-else 结束的标签</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411301942328.png" alt="image-20241130194243257" /></p>
<h2 id="n-元表示"><a class="markdownIt-Anchor" href="#n-元表示"></a> N-元表示</h2>
<h3 id="三元式"><a class="markdownIt-Anchor" href="#三元式"></a> 三元式</h3>
<table>
<thead>
<tr>
<th>操作符</th>
<th>左操作数</th>
<th>右操作数</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>x</td>
<td>y</td>
</tr>
</tbody>
</table>
<p>直接三元式即使式子重复也要重新写出，间接三元式则省略重复直接复用</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231641546.png" alt="image-20241023164118491" /></p>
<h3 id="四元式"><a class="markdownIt-Anchor" href="#四元式"></a> 四元式</h3>
<table>
<thead>
<tr>
<th>操作符</th>
<th>操作数 1</th>
<th>操作数 2</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td>通常是由编译引入的临时变量，可由编译程序分配一个寄存器或主存单元，一般用 T1~T4</td>
</tr>
</tbody>
</table>
<h2 id="中间代码的图表示"><a class="markdownIt-Anchor" href="#中间代码的图表示"></a> 中间代码的图表示</h2>
<h3 id="抽象语法树"><a class="markdownIt-Anchor" href="#抽象语法树"></a> 抽象语法树</h3>
<blockquote>
<p>操作数出现在叶节点，操作符出现在中间节点</p>
</blockquote>
<p>抽象语法树与三元式的关系：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231644311.png" alt="image-20241023164420241" /></p>
<h3 id="dag-图"><a class="markdownIt-Anchor" href="#dag-图"></a> DAG 图</h3>
<blockquote>
<p>有向无环图</p>
</blockquote>
<p>抽象语法树—&gt;DAG（删去多余支）：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231645792.png" alt="image-20241023164513738" /></p>
<h2 id="ssa"><a class="markdownIt-Anchor" href="#ssa"></a> SSA</h2>
<p><strong>每个变量只赋值一次</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171009012.png" alt="image-20241217100927879" /></p>
<h1 id="8-错误处理"><a class="markdownIt-Anchor" href="#8-错误处理"></a> 8 错误处理</h1>
<h2 id="概述-2"><a class="markdownIt-Anchor" href="#概述-2"></a> 概述</h2>
<p>正确的源程序：通过编译生成中间代码</p>
<p>错误的源程序：通过编译发现并指出错误</p>
<p>错误处理能力：</p>
<ul>
<li>诊察错误的能力</li>
<li>报错及时准确</li>
<li>一次编译找出错误的多少</li>
<li>错误的改正能力</li>
<li>遏止重复的错误信息的能力</li>
</ul>
<h2 id="错误分类"><a class="markdownIt-Anchor" href="#错误分类"></a> 错误分类</h2>
<p>错误分为两类：</p>
<ul>
<li>语法错误：源程序不合乎文法</li>
<li>语义错误：程序不符合语义规则或超越具体计算机系统的限制，<mark>将运行时错误也划分在语义错误范畴内</mark></li>
</ul>
<blockquote>
<p>语义规则：</p>
<ul>
<li>标识符引用要符合作用域规定</li>
<li>标识符先说明后引用</li>
<li>参与运算的操作数类型一致</li>
<li>过程调用时实参与形参要一致</li>
<li>下标变量下标不能越界</li>
</ul>
<p>超越系统限制：</p>
<ul>
<li>数据溢出</li>
<li>符号表、静态存储分配数据区溢出</li>
<li>动态存储分配数据区溢出</li>
</ul>
</blockquote>
<h2 id="错误诊察和报告"><a class="markdownIt-Anchor" href="#错误诊察和报告"></a> 错误诊察和报告</h2>
<h3 id="错误诊察"><a class="markdownIt-Anchor" href="#错误诊察"></a> 错误诊察</h3>
<ol>
<li>违反语法和语义规则以及超过编译系统限制的错误（编译程序：语法和语义分析）</li>
<li>下标越界，计算结果溢出以及动态存储数据区溢出（目标程序：目标程序运行时）</li>
</ol>
<h3 id="错误报告"><a class="markdownIt-Anchor" href="#错误报告"></a> 错误报告</h3>
<p>报告内容：</p>
<ul>
<li>出错位置：行号|单词序号</li>
<li>出错性质：文字信息|错误编码</li>
</ul>
<p>报告方式：</p>
<ul>
<li>分析完再报告</li>
<li>边分析边报告</li>
</ul>
<h2 id="错误处理技术"><a class="markdownIt-Anchor" href="#错误处理技术"></a> 错误处理技术</h2>
<blockquote>
<p>进行错误改正或错误局部化处理</p>
</blockquote>
<p>一般原则：诊察到错误，暂停对后面符号的分析，跳过错误</p>
<ul>
<li>词法分析：显示错误，并跳过该标识符</li>
<li>语法语义分析：跳过所在语法成分，从新语句继续往下</li>
</ul>
<p>错误局部化处理：将错误影响限制在局部范围内，避免错误扩散和影响程序其他部分的分析。一直跳到语句的右界符（eg：end）或语法程序的合法后继符号</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231530512.png" alt="image-20241023153021469" /></p>
<h1 id="9-语法制导翻译技术"><a class="markdownIt-Anchor" href="#9-语法制导翻译技术"></a> 9 语法制导翻译技术</h1>
<h2 id="翻译文法-tg-和语法制导翻译"><a class="markdownIt-Anchor" href="#翻译文法-tg-和语法制导翻译"></a> 翻译文法 TG 和语法制导翻译</h2>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231651606.png" alt="image-20241023165115565" /></p>
<p>目标：将中缀表达式转化为逆波兰表示。</p>
<p>则翻译的任务是将上述文法插入相应的动作符号。<strong>在什么时候插入打印终结符号</strong></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>→</mo><mi>E</mi><mo>+</mo><mi>T</mi><mi mathvariant="normal">@</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">E\rightarrow E+T@+
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">@</span><span class="mord">+</span></span></span></span></span></p>
<p>以第一个为例，表示处理 E，读+，处理 T 并打印+。</p>
<p>同理：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn><mi>E</mi><mo>→</mo><mi>E</mi><mo>+</mo><mi>T</mi><mi mathvariant="normal">@</mi><mo>+</mo><mspace linebreak="newline"></mspace><mn>2.</mn><mi>E</mi><mo>→</mo><mi>T</mi><mspace linebreak="newline"></mspace><mn>3.</mn><mi>T</mi><mo>→</mo><mi>T</mi><mo>∗</mo><mi>F</mi><mi mathvariant="normal">@</mi><mo>∗</mo><mspace linebreak="newline"></mspace><mn>4.</mn><mi>T</mi><mo>→</mo><mi>F</mi><mspace linebreak="newline"></mspace><mn>5.</mn><mi>F</mi><mo>→</mo><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mn>6.</mn><mi>F</mi><mo>→</mo><mi>i</mi><mi mathvariant="normal">@</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">1.E\rightarrow E+T@+\\
2.E\rightarrow T\\
3.T\rightarrow T*F@*\\
4.T\rightarrow F\\
5.F\rightarrow(E)\\
6.F\rightarrow i@i
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">@</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord">@</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mord">@</span><span class="mord mathdefault">i</span></span></span></span></span></p>
<ul>
<li>输入文法：未插入动作符号，可以推导产生输入序列</li>
<li>翻译文法：插入动作符号，可以推导产生活动序列（输入序列和动作序列）</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412011609386.png" alt="image-20241201160834755" /></p>
<p>从活动序列中，抽去动作符号即得输入序列<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mi>i</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">(i+i)*i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>；抽去输入序列可得动作序列<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>i</mi><mo>+</mo><mi>i</mi><mo>∗</mo></mrow><annotation encoding="application/x-tex">ii+i*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mord">∗</span></span></span></span>。</p>
<p><strong>翻译文法是上下文无关文法，其终结符号集由输入符号和动作符号组成。由翻译文法所产生的终结符号串称为活动序列</strong></p>
<p><mark>语法制导翻译：按照翻译文法进行的翻译</mark></p>
<h2 id="属性翻译文法-atg"><a class="markdownIt-Anchor" href="#属性翻译文法-atg"></a> 属性翻译文法 ATG</h2>
<blockquote>
<p>在翻译文法的基础上，可以进一步定义属性文法，翻译文法中的号，包括终结符、非终结符和动作符号均可带有属性，这样能更好的描述和实现编译过程。属性即符号所具有的值部分</p>
</blockquote>
<h3 id="综合属性"><a class="markdownIt-Anchor" href="#综合属性"></a> 综合属性</h3>
<blockquote>
<p>综合属性：自底向上，自右向左求值（左边等于右边）</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231723524.png" alt="image-20241023172348473" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202410231724117.png" alt="image-20241023172412066" /></p>
<p>表示属性的求值过程：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412011617304.png" alt="image-20241201161735240" /></p>
<h3 id="继承属性"><a class="markdownIt-Anchor" href="#继承属性"></a> 继承属性</h3>
<blockquote>
<p>继承属性：自顶向下，自左向右</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412011631185.png" alt="image-20241201163148137" /></p>
<p>翻译文法目标：填符号表@set_table</p>
<p>填表需要的信息：类型 Type，名字 id，填的位置</p>
<p><strong>类型和名字在词法分析时得到，设为两个综合属性</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412011634544.png" alt="image-20241201163422493" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412011635132.png" alt="image-20241201163536070" /></p>
<h3 id="l-属性翻译文法-l-atg"><a class="markdownIt-Anchor" href="#l-属性翻译文法-l-atg"></a> L-属性翻译文法 L-ATG</h3>
<blockquote>
<p>输入文法要求是 LL(1) 文法，可用自顶向下分析构造分析器。在分析过程中可进行属性求 值。</p>
</blockquote>
<ul>
<li>终结符、非终结符及动作符号都带有属性，且每个属性都有值域</li>
<li>非终结符号及动作符号的属性可分为继承属性和综合属性</li>
<li>开始符号的继承属性具有指定的初始值</li>
<li>终结符号的每个综合属性都有指定的初始值</li>
<li>属性的求值规则
<ul>
<li>继承属性：<mark>自顶向下，自左向右</mark>
<ul>
<li>左部非终结符号的属性值，取右部该符号已有的值</li>
<li>右部的属性值，用左部继承属性或出现在该符号左部的符号的属性值计算</li>
</ul>
</li>
<li>综合属性：
<ul>
<li>右部非终结符号的属性值取其下部左部同名值</li>
<li>左部非终结符号的属性值，用产生式左部继承符号或右部属性</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="简单赋值形式的-l-属性翻译文法-sl-atg"><a class="markdownIt-Anchor" href="#简单赋值形式的-l-属性翻译文法-sl-atg"></a> 简单赋值形式的 L-属性翻译文法 SL-ATG</h5>
<ul>
<li>产生式右部继承符号是常量，等于左部符号的继承属性值或左边符号的综合属性值</li>
<li>左部综合属性是常量，等于左部继承属性值或等于右部综合属性值</li>
</ul>
<p>显然不是 SL-ATG，如何转化？</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031340602.png" alt="image-20241203133953500" /></p>
<p><strong>解：</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031341975.png" alt="image-20241203134114915" /></p>
<p>改写为：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031343913.png" alt="image-20241203134359847" /></p>
<h2 id="自顶向下语法制导翻译"><a class="markdownIt-Anchor" href="#自顶向下语法制导翻译"></a> 自顶向下语法制导翻译</h2>
<blockquote>
<p>翻译看成对偶的集合：第一个元素为输入序列，第二个元素为动作序列。如果按文法得到这种对偶时，称为语法制导翻译</p>
</blockquote>
<h3 id="递归下降翻译器"><a class="markdownIt-Anchor" href="#递归下降翻译器"></a> 递归下降翻译器</h3>
<p>只需在递归下降分析加上输出即可</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031349048.png" alt="image-20241203134923976" /></p>
<h3 id="递归下降属性翻译器"><a class="markdownIt-Anchor" href="#递归下降属性翻译器"></a> 递归下降属性翻译器</h3>
<p>对于每个非终结符号都编写一个翻译子程序，根据该非终结符号具有的属性数目，设置相应的参数。</p>
<ul>
<li>继承属性：赋值形参，继承属性值</li>
<li>综合属性：变量形参，属性变量名（传地址，返回时有值）</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031432595.png" alt="image-20241203143200534" /></p>
<p>例子：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412031434792.png" alt="image-20241203143422743" /></p>
<p>【ppt：P38】</p>
<h1 id="10-语义分析和代码生成"><a class="markdownIt-Anchor" href="#10-语义分析和代码生成"></a> 10 语义分析和代码生成</h1>
<h2 id="语义分析的概念"><a class="markdownIt-Anchor" href="#语义分析的概念"></a> 语义分析的概念</h2>
<ul>
<li>上下文有关分析：标识符的作用域</li>
<li>类型的一致性检查</li>
<li>语义处理：
<ul>
<li>声明语句：填符号表</li>
<li>执行语句：按某种操作的目标结构生成代码</li>
</ul>
</li>
</ul>
<p><strong>用上下文无关文法只能描述语法的语法结构，不能描述语义</strong></p>
<p>因此，通常我们把与语义相关的上下文有关信息填入符号表中，并通过查符号表中的这些信 息来分析程序的语义是否正确</p>
<h2 id="栈式抽象机及其汇编指令"><a class="markdownIt-Anchor" href="#栈式抽象机及其汇编指令"></a> 栈式抽象机及其汇编指令</h2>
<p>栈式抽象机：三个存储器、一个指令寄存器和多个地址寄存器</p>
<p>存储器：数据存储器（存放 AR 的运行栈），操作存储器（操作数栈），指令存储器</p>
<p>STN：栈底的值送到次栈底</p>
<h2 id="声明的处理"><a class="markdownIt-Anchor" href="#声明的处理"></a> 声明的处理</h2>
<p>主要任务：</p>
<ul>
<li>分离出每个被声明的实体，并把他们的名字填入符号表</li>
<li>把被声明实体的有关特性信息尽可能多的填入符号表</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412041530707.png" alt="image-20241204153013584" /></p>
<p>属性翻译文法：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412041539273.png" alt="image-20241204153959198" /></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">@</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi mathvariant="normal">_</mi><mi>o</mi><msub><mi>n</mi><mrow><mo>↑</mo><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">@dec\_on_{\uparrow x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00444em;vertical-align:-0.31em;"></span><span class="mord">@</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">↑</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：用于记录反填类型应该填到哪里</p>
<h3 id="常量"><a class="markdownIt-Anchor" href="#常量"></a> 常量</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412041544644.png" alt="image-20241204154439580" /></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">@</mi><mi>i</mi><mi>n</mi><mi>s</mi><mi>e</mi><mi>r</mi><msub><mi>t</mi><mrow><mo>↓</mo><mi>t</mi><mo separator="true">,</mo><mi>n</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">@insert_{\downarrow t,n,c,s}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord">@</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">↓</span><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">n</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">c</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>：类别 t，名字 n，常量表达式值 c，常量表达式类别 s。</p>
<p>功能：</p>
<ul>
<li>检查声明的类型 t 和常量表达式的类型 s 是否一致</li>
<li>将名字 n，类型 t 和常量表达式的值 c 填入符号表</li>
</ul>
<h3 id="简单变量"><a class="markdownIt-Anchor" href="#简单变量"></a> 简单变量</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412041549232.png" alt="image-20241204154912163" /></p>
<p>对于变长字符串：</p>
<ul>
<li>动态申请存储空间，存储在堆中</li>
<li>通过指向存放该实体数据区的指针来引用该实体</li>
</ul>
<h3 id="数组变量"><a class="markdownIt-Anchor" href="#数组变量"></a> 数组变量</h3>
<p>LOC 是数组首地址，数组定义有上下界 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mo stretchy="false">[</mo><mi>L</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>U</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">B[L(1),U(1)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mopen">[</span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>D</mi><mi>D</mi><mi>R</mi><mo>=</mo><mi>L</mi><mi>O</mi><mi>C</mi><mo>+</mo><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>L</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>∗</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">ADDR=LOC+(x-L(1))*E
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span></span></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412041552340.png" alt="image-20241204155227232" /></p>
<h2 id="表达式的处理"><a class="markdownIt-Anchor" href="#表达式的处理"></a> 表达式的处理</h2>
<h2 id="赋值语句的处理"><a class="markdownIt-Anchor" href="#赋值语句的处理"></a> 赋值语句的处理</h2>
<h2 id="控制语句的处理"><a class="markdownIt-Anchor" href="#控制语句的处理"></a> 控制语句的处理</h2>
<h2 id="过程调用和返回"><a class="markdownIt-Anchor" href="#过程调用和返回"></a> 过程调用和返回</h2>
<h1 id="11-词法自动化"><a class="markdownIt-Anchor" href="#11-词法自动化"></a> 11 词法自动化</h1>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411260959867.png" alt="image-20241126095937762" /></p>
<h2 id="正则文法和正则表达式"><a class="markdownIt-Anchor" href="#正则文法和正则表达式"></a> 正则文法和正则表达式</h2>
<p>正则集合递归定义：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span>都是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span>上的正则表达式，分别为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mi>ε</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\varepsilon\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">ε</span><span class="mclose">}</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span></li>
<li>任何<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">a\in \Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span>上的正则表达式，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mi>a</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{a\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mclose">}</span></span></span></span></li>
<li>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">e_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">e_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span>是正则表达式，其正则集合分别为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>e</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(e_1)|(e_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub><mo>∪</mo><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_1 \cup L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>e</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>e</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(e_1)(e_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_1L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>e</mi><mn>1</mn><mo>∗</mo></msubsup></mrow><annotation encoding="application/x-tex">e_1^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.936804em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span> -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>L</mi><mn>1</mn><mo>∗</mo></msubsup></mrow><annotation encoding="application/x-tex">L_1^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.936804em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>优先级：先*，后·，最后|</p>
<p><mark>正则表达式相等=正则表达式表示的语言相等</mark></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo stretchy="false">{</mo><mi>a</mi><mi>b</mi><mo stretchy="false">}</mo><mo>=</mo><mo stretchy="false">{</mo><mi>b</mi><mi>a</mi><mo stretchy="false">}</mo><mi>b</mi><mspace linebreak="newline"></mspace><mo stretchy="false">{</mo><mi>a</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mo stretchy="false">}</mo><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">{</mo><mi>a</mi><mo stretchy="false">}</mo><mo stretchy="false">{</mo><mi>b</mi><mo stretchy="false">}</mo><mo stretchy="false">}</mo><mo>=</mo><mo stretchy="false">(</mo><msup><mi>a</mi><mo>∗</mo></msup><msup><mi>b</mi><mo>∗</mo></msup><msup><mo stretchy="false">)</mo><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">b\{ab\}=\{ba\}b\\
\{a|b\}=\{\{a\}\{b\}\}=(a^*b^*)^*
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mclose">}</span><span class="mord mathdefault">b</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mclose">}</span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mclose">}</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>性质：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261027294.png" alt="image-20241126102736239" /></p>
<h3 id="正则3-型文法转换为正则表达式"><a class="markdownIt-Anchor" href="#正则3-型文法转换为正则表达式"></a> 正则（3 型）文法转换为正则表达式</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412081111573.png" alt="image-20241208111043921" /></p>
<ul>
<li>代入：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>x</mi><mi>B</mi><mo separator="true">,</mo><mi>B</mi><mo>→</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow xB,B\rightarrow y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>，转换为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>x</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow xy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></li>
<li>消除递归：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>x</mi><mi>A</mi><mi mathvariant="normal">∣</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow xA|y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">A</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>，转换为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><msup><mi>x</mi><mo>∗</mo></msup><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow x^*y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8831359999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></li>
<li>BNF：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>x</mi><mo separator="true">,</mo><mi>A</mi><mo>→</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow x,A\rightarrow y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>，转换为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">A\rightarrow x|y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></li>
</ul>
<h2 id="有穷自动机"><a class="markdownIt-Anchor" href="#有穷自动机"></a> 有穷自动机</h2>
<h3 id="类别"><a class="markdownIt-Anchor" href="#类别"></a> 类别</h3>
<h4 id="确定的有穷自动机-dfa"><a class="markdownIt-Anchor" href="#确定的有穷自动机-dfa"></a> 确定的有穷自动机 DFA</h4>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261038476.png" alt="image-20241126103847422" /></p>
<h4 id="不确定的有穷自动机-nfa"><a class="markdownIt-Anchor" href="#不确定的有穷自动机-nfa"></a> 不确定的有穷自动机 NFA</h4>
<p>如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span></span></span></span>为多值函数，且输入允许为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，那么自动机就是不确定的，某一个状态，对于输入某个字符存在多个后继状态。</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412081133285.png" alt="image-20241208113349218" /></p>
<h3 id="nfa-的确定化"><a class="markdownIt-Anchor" href="#nfa-的确定化"></a> NFA 的确定化</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi><mo>−</mo><mi>C</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varepsilon-Closure(I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">)</span></span></span></span>：</p>
<ul>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>∈</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">s\in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>∈</mo><mi>ε</mi><mo>−</mo><mi>C</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s\in \varepsilon-Closure(I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">)</span></span></span></span></li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>∈</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">s\in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span></span></span></span>，则从<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>出发经过任意条<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>弧能到达的状态都属于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi><mo>−</mo><mi>C</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mi>I</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varepsilon-Closure(I)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">)</span></span></span></span>。</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261102837.png" alt="image-20241126110255798" /></p>
<p>由 start：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>=</mo><mi>ε</mi><mo>−</mo><mi>C</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mrow><mn>1</mn><mo separator="true">,</mo><mn>4</mn></mrow></mrow><annotation encoding="application/x-tex">I=\varepsilon-Closure(1)={1,4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span></span></span></span></span>确定第一个状态</p>
<table>
<thead>
<tr>
<th>I</th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">I_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">I_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th>
<th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">I_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>{1,4}</td>
<td>{2,3}</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
</tr>
<tr>
<td>{2,3}</td>
<td>{2}</td>
<td>{4}</td>
<td>{3,4}</td>
</tr>
<tr>
<td>{2}</td>
<td>{2}</td>
<td>{4}</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
</tr>
<tr>
<td>{4}</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
</tr>
<tr>
<td>{3,4}</td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
<td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></td>
<td>{4}</td>
</tr>
</tbody>
</table>
<p>直至所有状态都分析完毕，给状态重新编号</p>
<p><strong>包含原来终态的状态就是终态，DFA 可以有多个终态</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261108714.png" alt="image-20241126110830666" /></p>
<p><mark>对于任何一个 NFA M’，都可以构造出一个 DFA M，使得 L(M)=L(M’)</mark></p>
<h3 id="dfa-最小化"><a class="markdownIt-Anchor" href="#dfa-最小化"></a> DFA 最小化</h3>
<p><mark>对于任意一个 DFA，存在一个唯一的状态最少的等价的 DFA</mark></p>
<p>最简：没有多余状态且他的状态中没有两个是互相等价的，所以需要消除多余状态，合并等价状态</p>
<p>状态 s 和 t 等价条件是：</p>
<ul>
<li>一致性条件：s 和 t 同时为可接受状态或不接受状态</li>
<li>蔓延性条件：对于所有输入符号，s 和 t 必须转换到等价的状态里<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261503445.png" alt="image-20241126150336399" /></li>
</ul>
<p><strong>分割法</strong>：把一个 DFA（不包含多余状态）分割成一些不相关的子集，不同的两个子集状态都是可区别的，同一个子集中的任何状态都是等价的。</p>
<p><mark>任何有后继的状态和任何无后继的状态一定不等价</mark></p>
<ol>
<li>区分终态和非终态</li>
<li>不同的两个子集状态都区别，同一子集的后继都要落到同一区。</li>
</ol>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261538604.png" alt="image-20241126153844544" /></p>
<h3 id="正则表达式和有穷自动机的等价性"><a class="markdownIt-Anchor" href="#正则表达式和有穷自动机的等价性"></a> 正则表达式和有穷自动机的等价性</h3>
<p><mark>任何一个正则表达式，都可以构造出等价的 DFA，反之同理</mark></p>
<h4 id="有穷自动机-正则文法"><a class="markdownIt-Anchor" href="#有穷自动机-正则文法"></a> 有穷自动机 → 正则文法</h4>
<ol>
<li>对转换函数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f(A,t)=B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，写成产生式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>t</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">A\rightarrow tB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></li>
<li>对可接受（终态）状态 Z，增加产生式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>→</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">Z\rightarrow \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></li>
<li>有穷自动机的出态对应文法的开始符号，有穷自动机的字母表为文法的终结符号集</li>
</ol>
<blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261554314.png" alt="image-20241126155414263" /></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mrow><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi></mrow><mo separator="true">,</mo><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi></mrow><mo separator="true">,</mo><mi>P</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>P</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>a</mi><mi>B</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mi>D</mi><mspace linebreak="newline"></mspace><mi>B</mi><mo>→</mo><mi>b</mi><mi>C</mi><mspace linebreak="newline"></mspace><mi>C</mi><mo>→</mo><mi>a</mi><mi>A</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mi>D</mi><mi mathvariant="normal">∣</mi><mi>ε</mi><mspace linebreak="newline"></mspace><mi>D</mi><mo>→</mo><mi>b</mi><mi>D</mi><mi mathvariant="normal">∣</mi><mi>a</mi><mi>B</mi><mi mathvariant="normal">∣</mi><mi>ε</mi></mrow><annotation encoding="application/x-tex">G=({A,B,C,D},{a,b},P,A)\\
P:A\rightarrow aB|bD\\
B\rightarrow bC\\
C\rightarrow aA|bD|\varepsilon\\
D\rightarrow bD|aB|\varepsilon
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">A</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord">∣</span><span class="mord mathdefault">ε</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord">∣</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord">∣</span><span class="mord mathdefault">ε</span></span></span></span></span></p>
</blockquote>
<h4 id="正则文法-有穷自动机"><a class="markdownIt-Anchor" href="#正则文法-有穷自动机"></a> 正则文法 → 有穷自动机</h4>
<ol>
<li>字母表与 G 的终结符号相同</li>
<li>为 G 中的每个非终结符生成 M 的一个状态，G 的开始符号 S 是开始状态 S</li>
<li>增加新状态 Z 作为 NFA 的终态</li>
<li>形如<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>t</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">A\rightarrow tB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>→</mo><mi mathvariant="normal">终</mi><mi mathvariant="normal">结</mi><mi mathvariant="normal">符</mi><mi mathvariant="normal">∣</mi><mi>ε</mi></mrow><annotation encoding="application/x-tex">t\rightarrow 终结符|\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">终</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">符</span><span class="mord">∣</span><span class="mord mathdefault">ε</span></span></span></span>，构造<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f(A,t)=B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></li>
</ol>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412081148540.png" alt="image-20241208114836486" /></p>
<h4 id="正则式-有穷自动机"><a class="markdownIt-Anchor" href="#正则式-有穷自动机"></a> 正则式 → 有穷自动机</h4>
<p>【PPT P11】</p>
<h4 id="有穷自动机-正则式"><a class="markdownIt-Anchor" href="#有穷自动机-正则式"></a> 有穷自动机 → 正则式</h4>
<ol>
<li>
<p>在自动机上增加两个结点 x，y，从 x 结点用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>弧到 M 所有初态，从所有终态用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>到 y 结点</p>
</li>
<li>
<p>逐步消去所有结点</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411261601922.png" alt="image-20241126160117870" /></p>
</li>
</ol>
<h4 id="正则文法-正则式"><a class="markdownIt-Anchor" href="#正则文法-正则式"></a> 正则文法 → 正则式</h4>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412081149365.png" alt="image-20241208114949304" /></p>
<h4 id="正则式-正则文法"><a class="markdownIt-Anchor" href="#正则式-正则文法"></a> 正则式 → 正则文法</h4>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412081150497.png" alt="image-20241208115032420" /></p>
<h2 id="词法分析程序的自动生成器"><a class="markdownIt-Anchor" href="#词法分析程序的自动生成器"></a> 词法分析程序的自动生成器</h2>
<blockquote>
<p>根据给定的正则表达式自动生成相应的词法分析程序</p>
</blockquote>
<ul>
<li>辅助定义式</li>
<li>识别规则</li>
<li>用户子程序</li>
</ul>
<h1 id="12-语法分析"><a class="markdownIt-Anchor" href="#12-语法分析"></a> 12 语法分析</h1>
<blockquote>
<p>自顶向下主要方法：递归子程序法，LL 分析法</p>
<p>自底向上主要方法：算符优先分析法，LR 分析法</p>
</blockquote>
<h2 id="ll-分析法"><a class="markdownIt-Anchor" href="#ll-分析法"></a> LL 分析法</h2>
<blockquote>
<p>LL-自左向右扫描、自左向右地分析和匹配输入传，表现为最左推导的性质</p>
</blockquote>
<h3 id="组成部分"><a class="markdownIt-Anchor" href="#组成部分"></a> 组成部分</h3>
<p><mark>将语法成分的左右界符用#表示</mark></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101311693.png" alt="image-20241210131117592" /></p>
<h4 id="分析表"><a class="markdownIt-Anchor" href="#分析表"></a> 分析表</h4>
<p>是二维矩阵</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101313714.png" alt="image-20241210131348659" /></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>A</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>A</mi><mo>:</mo><mo>:</mo><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M[A,a]=A::=a_i
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>表示 A 去匹配输入串时，且输入符号为 a 时，可以用 A 的第 i 个选择匹配</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>A</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">M[A,a]=error
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span></p>
<p>表示不能匹配。</p>
<h4 id="符号栈"><a class="markdownIt-Anchor" href="#符号栈"></a> 符号栈</h4>
<ul>
<li>开始状态：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101405928.png" alt="image-20241210140552872" /></li>
<li>工作状态：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101406718.png" alt="image-20241210140618656" /></li>
<li>出错状态：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101406670.png" alt="image-20241210140638616" /></li>
<li>结束状态： <img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412101406794.png" alt="image-20241210140644739" /></li>
</ul>
<h4 id="执行程序"><a class="markdownIt-Anchor" href="#执行程序"></a> 执行程序</h4>
<ol>
<li>把#和文法识别符号 E 推进栈，读入下一个符号，重复下述过程直到正常结束或出错</li>
<li>测定栈顶符号 X 和当前输入符号 a
<ol>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><mi>a</mi><mo>=</mo><mi mathvariant="normal">#</mi></mrow><annotation encoding="application/x-tex">X=a=\#</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">#</span></span></span></span>，正常结束</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><mi>a</mi><mi mathvariant="normal">≠</mi><mi mathvariant="normal">#</mi></mrow><annotation encoding="application/x-tex">X=a\neq \#</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">#</span></span></span></span>，把 X 推出栈，读入下一个符号</li>
<li>若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">X\in V_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，查分析表
<ol>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>X</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>X</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>U</mi><mi>V</mi><mi>W</mi></mrow><annotation encoding="application/x-tex">M[X,a]=X::=UVW</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span>，将 X 弹出栈，UVW 入栈（U 在栈顶：最左推导）</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>X</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">M[X,a]=error</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，出错处理</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>X</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>X</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">M[X,a]=X::=\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，a 为 X 的后继符号，将 X 弹出栈（不读下一符号），继续分析</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111620321.png" alt="image-20241211161945074" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111622765.png" alt="image-20241211162212691" /></p>
<h3 id="构造分析表"><a class="markdownIt-Anchor" href="#构造分析表"></a> 构造分析表</h3>
<p>求 first 集和 follow 集，follow 即求非终结符右边所有终结符的集合（开始符号的 follow 集有#，follow 集不包含 ε）</p>
<p>follow 集合的定义：</p>
<ul>
<li>若 A 是开始符号，则#就在 Follow (A) 中。</li>
<li>若存在产生式 B →aAg ，则 First (g) - {ε }在 Follow (A) 中。</li>
<li>若存在产生式 B →aA 或 B →aAg ，且 ε 在 First (g) 中，则 Follow (A)包括 Follow (B)。</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111653360.png" alt="image-20241211165301285" /></p>
<p>将 first 集填入，如果可以推出 ε，就将 follow 所在的全部填入</p>
<p><strong>不是所有的文法都能构造出上述的分析表，能使用的称为 LL(1)文法</strong></p>
<h3 id="ll1文法"><a class="markdownIt-Anchor" href="#ll1文法"></a> LL(1)文法</h3>
<blockquote>
<p>其分析表 M 不含多重定义入口（即分析表中无两条以上规则）</p>
</blockquote>
<p>是 LL(1)文法的充要条件，即证明是 LL(1)文法：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111655344.png" alt="image-20241211165530286" /></p>
<p><mark>如果 G 是左递归的,或者是二义性的文法,则至少有一 个多重入口</mark></p>
<p>TODO：有些文法可以从非 LL(1)改写为 LL(1)</p>
<h2 id="移进-归约分析"><a class="markdownIt-Anchor" href="#移进-归约分析"></a> 移进-归约分析</h2>
<blockquote>
<p>记录分析的历史和现状，确定下一步动作是移进还是归约</p>
</blockquote>
<ul>
<li>按扫描顺序一一移进符号栈</li>
<li>移进过程中检查栈中符号，若当前栈顶的若干符号形成当前句型的句柄时，就根据规则进行归约
<ul>
<li>将句柄从符号栈弹出，将非终结符号压入栈</li>
<li>检查栈内符号串是否构成新的句柄，若有就再次归约</li>
</ul>
</li>
<li>分析一直读到右界符</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111717135.png" alt="image-20241211171744046" /></p>
<blockquote>
<p>但是 b 也可以直接归约为 A，为什么将 Ab 归约为 A 呢？</p>
</blockquote>
<p><mark>未真正解决句柄的识别</mark></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111720938.png" alt="image-20241211172005882" /></p>
<h2 id="算符优先分析"><a class="markdownIt-Anchor" href="#算符优先分析"></a> 算符优先分析</h2>
<blockquote>
<p>预先规定相邻终结符之间的优先关系，从而确定句柄进行归约。</p>
</blockquote>
<p>当栈顶项(或次栈顶项)<mark>终结符（除去非终结符）<mark>的优先级大于栈外的</mark>终结符</mark>的优先级，则进行归约，否则移进。（竖列是栈内，横列是栈外）</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111731384.png" alt="image-20241211173155305" /></p>
<h3 id="算符优先文法-opg"><a class="markdownIt-Anchor" href="#算符优先文法-opg"></a> 算符优先文法 OPG</h3>
<p>OG 文法：无形如<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>=</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>V</mi><mi>W</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">U=...VW...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span></span>的规则，这里<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo separator="true">,</mo><mi>W</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">V,W\in V_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>
<ul>
<li>运算是以中缀形式出现的</li>
<li>如果是 OG 文法，就不会出现两个非终结符相邻的句型</li>
<li>算法语言中的表达式以及大部分语言成分的文法均是 OG 文法</li>
</ul>
<h3 id="构造优先关系矩阵"><a class="markdownIt-Anchor" href="#构造优先关系矩阵"></a> 构造优先关系矩阵</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111752568.png" alt="image-20241211175247511" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111752741.png" alt="image-20241211175257684" /></p>
<p>构造 FIRSTVT(U)：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111755198.png" alt="image-20241211175502132" /></p>
<p>构造 LASTVT(U)：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111755291.png" alt="image-20241211175523229" /></p>
<p>素短语：文法 G 的句型的素短语是一个短语，他至少包含一个终结符号，并且除他自身以外不再包含其他素短语</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111757220.png" alt="image-20241211175746145" /></p>
<p>是找句型的最左子串（最左素短语）并进行归约。</p>
<h2 id="lr-分析法"><a class="markdownIt-Anchor" href="#lr-分析法"></a> LR 分析法</h2>
<p>从左到右扫描(L)自底向上进行归约®，是规范归约</p>
<h3 id="组成部分-2"><a class="markdownIt-Anchor" href="#组成部分-2"></a> 组成部分</h3>
<ul>
<li>状态栈：放置分析器状态和文法符号</li>
<li>分析表：两个矩阵，指示分析器的动作，是移进还是归约，根据不同的文法类采用不同的构造方法</li>
<li>控制程序：根据分析表所规定的动作，对栈操作</li>
</ul>
<h3 id="分析表种类"><a class="markdownIt-Anchor" href="#分析表种类"></a> 分析表种类</h3>
<ul>
<li>SLR 分析表（简单 LR 分析表）：构造简单，大多数上下文无关文法都能构造出</li>
<li>LR 分析表（规范 LR 分析表）：适用文法类最大，几乎所有上下文无关文法都能构造出，但分析表体积太大</li>
<li>LALR 分析表（超前 LR 分析表）：适用文法类和实现难易在两者之间，但很实用</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111810333.png" alt="image-20241211181032269" /></p>
<p>状态转移表(GOTO)，分析动作表(ACTION)</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111822612.png" alt="image-20241211182256560" /></p>
<h3 id="构造-lr0"><a class="markdownIt-Anchor" href="#构造-lr0"></a> 构造 LR(0)</h3>
<ul>
<li>将文法拓广：使其只有一个接受状态，消除所有|，列出文法所有的项目</li>
<li>将有关项目组成项目集,所有项目集构成的集合即为 LR(0)</li>
</ul>
<h1 id="14-代码优化"><a class="markdownIt-Anchor" href="#14-代码优化"></a> 14 代码优化</h1>
<h2 id="概述-3"><a class="markdownIt-Anchor" href="#概述-3"></a> 概述</h2>
<p>分类 1：</p>
<ul>
<li>与机器无关：在中间代码的优化，包括数据流分析、常量传播、公共子表达式删除、死代码删除等等</li>
<li>与机器相关：充分利用系统资源，包括指令系统、寄存器资源。<mark>只在特定体系结构下有效</mark></li>
</ul>
<p>分类 2：</p>
<ul>
<li>局部优化：基本块内，eg：局部公共子表达式删除</li>
<li>全局优化：函数/过程内，跨越基本块，eg：全局数据流分析</li>
<li>跨函数优化：整个程序，eg：跨函数别名分析，逃逸分析</li>
</ul>
<h2 id="基本块和流图"><a class="markdownIt-Anchor" href="#基本块和流图"></a> 基本块和流图</h2>
<h3 id="基本块"><a class="markdownIt-Anchor" href="#基本块"></a> 基本块</h3>
<p>基本块，满足以下条件的最大序列：<mark>没有跳转，没有分支的最大序列</mark></p>
<ul>
<li>连续的语句序列</li>
<li>程序的执行只能从第一条进入</li>
<li>只能从最后一句离开</li>
</ul>
<blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411021151793.png" alt="image-20241102115150685" /></p>
<p>（1）-（6）：goto 可能直接跳到（3），所以不是</p>
<p>（3）-（8）：×，不是最大的</p>
<p>（7）-（13）：×</p>
</blockquote>
<h4 id="划分基本块"><a class="markdownIt-Anchor" href="#划分基本块"></a> 划分基本块</h4>
<p>输入：四元式序列</p>
<p>输出：基本块列表，每个四元式仅出现在一个基本块中</p>
<p>方法：</p>
<ul>
<li>确定入口语句（每个基本块的第一条语句）集合
<ul>
<li>整个序列的第一条语句</li>
<li>任何能由条件/无条件跳转转移到的第一条语句</li>
<li>紧跟在跳转语句之后的第一条语句</li>
</ul>
</li>
<li>每个入口语句直到下一个入口语句或者程序结束，属于同一个基本块</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051436897.png" alt="image-20241205143321541" /></p>
<h3 id="流图"><a class="markdownIt-Anchor" href="#流图"></a> 流图</h3>
<p>是有向图，节点为基本块，如果在某执行序列中，B2 紧跟在 B1 之后，则 B1 到 B2 有一条有向边。</p>
<h4 id="循环的查找"><a class="markdownIt-Anchor" href="#循环的查找"></a> 循环的查找</h4>
<p><mark>循环体中的优化效果更好</mark></p>
<p>如果从首节点出发，任何到达节点 B 的路径上都要经过 A，那么 A 就是 B 的必经节点，记为<code>A dom B</code>。</p>
<p>如果有边<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">B\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mtext> </mtext><mi>d</mi><mi>o</mi><mi>m</mi><mtext> </mtext><mi>B</mi></mrow><annotation encoding="application/x-tex">A\ dom\ B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace"> </span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mspace"> </span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，该边即为循环的回边</p>
<p>循环体：能到达 B 且不经过 A</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051439561.png" alt="image-20241205143948491" /></p>
<h2 id="局部优化"><a class="markdownIt-Anchor" href="#局部优化"></a> 局部优化</h2>
<blockquote>
<p>也就是基本块内的优化</p>
</blockquote>
<h3 id="利用代数性质"><a class="markdownIt-Anchor" href="#利用代数性质"></a> 利用代数性质</h3>
<ul>
<li>
<p>编译时完成常量表达式的计算，整数类型与实型的转换</p>
</li>
<li>
<p>下标变量引用时，地址计算的一部分工作在编译时预先做好（运行时只计算可变部分）</p>
</li>
<li>
<p>运算强度削弱<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411021312039.png" alt="image-20241102131243970" /></p>
</li>
<li>
<p>常数合并和传播<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411021313896.png" alt="image-20241102131313823" /></p>
</li>
<li>
<p>删除冗余代码：判断语句永远为 true，那 else 部分则为死代码</p>
</li>
</ul>
<h3 id="消除公共子表达式"><a class="markdownIt-Anchor" href="#消除公共子表达式"></a> 消除公共子表达式</h3>
<h4 id="构建-dag-图算法"><a class="markdownIt-Anchor" href="#构建-dag-图算法"></a> 构建 DAG 图算法</h4>
<p>输入：基本块内的中间代码序列</p>
<p>输出：完成局部公共子表达式删除后的 DAG 图</p>
<p>方法：</p>
<ul>
<li>建立节点表，记录了变量名和常量值，以及他们当前多对应的 DAG 图中的节点的序号。该表初始状态为空</li>
<li>对于形如<code>z=x op y</code>的中间代码，首先在节点表寻找 x，如果找到则记录下对应节点号 i；反之新建叶节点，假设其节点号仍为 i，标记为 x（如 x 为变量名，该标记更改为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>）；在节点表中增加新的一项（x，i），表明二者关系。y 与 x 同理。</li>
<li>在 DAG 寻找中间节点，标记为 op，左操作数节点号为 i，右操作数节点号为 j。如果找到记录下其节点号 k；如果未找到，在 DAG 图中新建一个中间节点，假设其节点号仍为 k，并将节点 i 和 j 分别与 k 相连，作为其左子节点和右子节点</li>
<li>在节点表中寻找 z，如果找到，将 z 所对应的节点号更改为 k；如果未找到，在节点表中新建一项(z, k)，表明二者之间的对应关系</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411022113992.png" alt="image-20241102211311907" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051530555.png" alt="image-20241205153032489" /></p>
<p><strong>数组、指针及函数调用的 DAG 图</strong></p>
<blockquote>
<ul>
<li>数组：将<code>x=a[i]</code>处理为[]为数组取值操作符；将<code>a[j]=y</code>处理为[]=为数组成员赋值操作符</li>
<li>指针：保守处理</li>
<li>函数调用：保守的认为函数调用改变了他所有可能改变的数据</li>
</ul>
</blockquote>
<h4 id="从-dag-图导出代码的算法"><a class="markdownIt-Anchor" href="#从-dag-图导出代码的算法"></a> 从 DAG 图导出代码的算法</h4>
<p>输入：DAG 图</p>
<p>输出：中间代码序列</p>
<p>方法：</p>
<ol>
<li>初始化一个放置 DAG 图中间节点的队列</li>
<li>如果 DAG 图中还有<mark>中间节点</mark>未进入队列，则执行步骤 3，否则执行步骤 5</li>
<li>选取一个尚未进入队列，但其所有父节点均已进入队列的中间节点 n 将其加入队列；或选取没有父节点的中间节点，将其加入队列</li>
<li>如果 n 的最左子节点符合步骤 3 的条件，将其加入队列；并沿着当前节点的最左边，循环访问其最左子节点，最左子节点的最左子节点等，将符合步骤 3 条件的中间节点依次加入队列；如果出现不符合步骤 3 条件的最左子节点，执行步骤 2</li>
<li>将中间节点队列逆序输出，便得到中间节点的计算顺序，将其整理成中间代码序列</li>
</ol>
<p><strong>叶节点不属于节点，不占用最左的范围。eg：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">t_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的最左子节点为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">t_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051554209.png" alt="image-20241205155459140" /></p>
<blockquote>
<p>窥孔优化：关注在一个目标指令的一个较短的序列上，删除冗余代码。<mark>不一定局限在同一基本块</mark></p>
</blockquote>
<h2 id="全局优化"><a class="markdownIt-Anchor" href="#全局优化"></a> 全局优化</h2>
<blockquote>
<p>是跨基本块的优化，受到控制流的影响（分支、循环）。</p>
<p>消除死代码，变量的活性</p>
</blockquote>
<h3 id="数据流分析"><a class="markdownIt-Anchor" href="#数据流分析"></a> 数据流分析</h3>
<p>用于获取数据在程序执行路径只如何流动</p>
<ul>
<li>变量语句前后是否存活。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>V</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>f</mi><mrow><mi mathvariant="normal">语</mi><mi mathvariant="normal">句</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_{out}=f_{语句}(V_{in})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">语</span><span class="mord cjk_fallback mtight">句</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
<li>变量何时定义</li>
<li>变量某一执行点上被定义的值，可能哪些执行点使用</li>
</ul>
<p>考察在程序的某个执行点的数据流信息：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>S</mi><mo stretchy="false">]</mo><mo>=</mo><mi>g</mi><mi>e</mi><mi>n</mi><mo stretchy="false">[</mo><mi>S</mi><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>S</mi><mo stretchy="false">]</mo><mo>−</mo><mi>k</mi><mi>i</mi><mi>l</mi><mi>l</mi><mo stretchy="false">[</mo><mi>S</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">out[S]=gen[S]\cup(in[S]-kill[S])
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p>
<ul>
<li><code>S</code>：某条语句|基本块|语句集合|基本块集合</li>
<li><code>out[S]</code>：S 末尾得到的数据流信息</li>
<li><code>gen[S]</code>：S 本身产生的数据流信息</li>
<li><code>in[S]</code>：进入 S 时的数据流信息</li>
<li><code>kill[S]</code>：S 注销的数据流信息，<strong>也就是覆盖了之前的赋值！</strong></li>
</ul>
<p>数据流方程求解过程的关键因素：</p>
<ul>
<li>产生和注销的信息取决于具体问题，可以由 in 定义 out，也可以由 out 定义 in</li>
<li>数据是沿着程序的执行路径，所以分析结果收到控制程序==结构的影响</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051713039.png" alt="image-20241205171316982" /></p>
<h4 id="到达定义分析"><a class="markdownIt-Anchor" href="#到达定义分析"></a> 到达定义分析</h4>
<p>Q：如果 p 处对该变量的引用，取得的值是否在 d 处定义？</p>
<p>A：如果从定义点 d 出发，存在一条路径达到 p，并且在该路径上，不存在对该变量的其他定义语句，则认为“变量的定义点 d 到达静态点 p”</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411022153393.png" alt="image-20241102215321314" /></p>
<p><strong>可能存在循环</strong></p>
<p><code>kill[d1]</code>：程序中对 u 定义的其他定义点的集合，<mark>包括 d1 之前或之后的定义点</mark></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051641746.png" alt="image-20241205164144668" /></p>
<p>（<code>cmp</code>是比较）</p>
<p><strong>对于基本块的 gen 和 out 计算：</strong></p>
<p>内部还需要减去之前 kill 的</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051644806.png" alt="image-20241205164441734" /></p>
<hr />
<p>输入：程序流图，且基本块的 kill 集合【gen 修改了哪些变量】和 gen 集合已经计算完成</p>
<p>输出：每个基本块入口和出口处<code>in[B]</code>和<code>out[B]</code></p>
<p>方法：</p>
<ul>
<li>
<p>将包括代表流图出口基本块<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mrow><mi>e</mi><mi>x</mi><mi>i</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">B_{exit}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的所有基本块的 out 集合初始化为空集</p>
</li>
<li>
<p>根据方程为基本块 B 以此计算 in 和 out</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><msub><mo>∪</mo><mrow><mi>B</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">前</mi><mi mathvariant="normal">驱</mi><mi mathvariant="normal">基</mi><mi mathvariant="normal">本</mi><mi mathvariant="normal">块</mi><mi>P</mi></mrow></msub><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>P</mi><mo stretchy="false">]</mo><mspace linebreak="newline"></mspace><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mi>g</mi><mi>e</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>−</mo><mi>k</mi><mi>i</mi><mi>l</mi><mi>l</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">in[B]=\cup_{B的前驱基本块P}out[P]\\
out[B]=gen[B]\cup(in[B]-kill[B])
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mbin">∪</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">前</span><span class="mord cjk_fallback mtight">驱</span><span class="mord cjk_fallback mtight">基</span><span class="mord cjk_fallback mtight">本</span><span class="mord cjk_fallback mtight">块</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">]</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p>
</li>
<li>
<p>如果 out 与之前不一致，则重复计算直到不再变化</p>
</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051651130.png" alt="image-20241205165151047" /></p>
<blockquote>
<p>更快的运算：位运算</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051653778.png" alt="image-20241205165338707" /></p>
</blockquote>
<h4 id="活跃变量分析"><a class="markdownIt-Anchor" href="#活跃变量分析"></a> 活跃变量分析</h4>
<p><mark>反向分析</mark></p>
<p>变量 x 的值在 p 点或沿着从 p 出发的某条路经中会被使用，则称 x 在 p 点是活跃的。</p>
<p><mark>对于寄存器分配有重要意义</mark></p>
<ul>
<li>不再活跃释放寄存器</li>
<li>活跃范围不重合，可共享寄存器</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mi>u</mi><mi>s</mi><mi>e</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">(</mo><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>−</mo><mi>d</mi><mi>e</mi><mi>f</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><msub><mo>∪</mo><mrow><mi>B</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">后</mi><mi mathvariant="normal">继</mi><mi mathvariant="normal">基</mi><mi mathvariant="normal">本</mi><mi mathvariant="normal">块</mi><mi>P</mi></mrow></msub><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>P</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[B]=use[B]\cup(out[B]-def[B])\\
out[B]=\cup_{B的后继基本块P}in[P]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mbin">∪</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">后</span><span class="mord cjk_fallback mtight">继</span><span class="mord cjk_fallback mtight">基</span><span class="mord cjk_fallback mtight">本</span><span class="mord cjk_fallback mtight">块</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">]</span></span></span></span></span></p>
<ul>
<li><code>def[B]</code>：被定义先于对于他们的使用（定义了）</li>
<li><code>use[B]</code>：被使用先于对他们的定义（用了）</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411022214744.png" alt="image-20241102221443682" /></p>
<p>例子：倒着往前算</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051726192.png" alt="image-20241205172632124" /></p>
<h5 id="死代码消除"><a class="markdownIt-Anchor" href="#死代码消除"></a> 死代码消除</h5>
<p>哪些赋值后面没有用到</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051729319.png" alt="image-20241205172959240" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051731303.png" alt="image-20241205173118237" /></p>
<h3 id="全局复制传播"><a class="markdownIt-Anchor" href="#全局复制传播"></a> 全局复制传播</h3>
<blockquote>
<p>寻找所有可以被替换成常量的变量</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060842278.png" alt="image-20241206084217145" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060843947.png" alt="image-20241206084323877" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060844358.png" alt="image-20241206084405290" /></p>
<h3 id="定义-使用链"><a class="markdownIt-Anchor" href="#定义-使用链"></a> 定义-使用链</h3>
<h4 id="冲突图"><a class="markdownIt-Anchor" href="#冲突图"></a> 冲突图</h4>
<blockquote>
<p>假设只有跨越基本块活跃的变量才能分配到全局寄存器，并且活跃范围重合的变量之间无法共享全局寄存器</p>
</blockquote>
<p>边线连接：一个变量在另一个变量==定义（赋值）==时是活跃的</p>
<h4 id="定义-使用链-2"><a class="markdownIt-Anchor" href="#定义-使用链-2"></a> 定义-使用链</h4>
<p>定义-使用链：变量的某一<mark>定义点</mark>，以及所有可能使用该定义点所定义变量值的<mark>使用点</mark>所组成的一个链</p>
<blockquote>
<p>链之中，第一个点是定义点，剩下都是使用点。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&lt;</mo><mi>B</mi><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;B1,1&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span> B1 基本块的第一行被定义 or 使用</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060902156.png" alt="image-20241206090231081" /></p>
<p>如果他们拥有某个同样的使用点，则合并为同一个网。</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060903952.png" alt="image-20241206090327901" /></p>
<p>画出网络后，如果链之间有连接，说明变量之间有冲突</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060905178.png" alt="image-20241206090501107" /></p>
<h3 id="循环优化"><a class="markdownIt-Anchor" href="#循环优化"></a> 循环优化</h3>
<h4 id="循环不变式的代码外提"><a class="markdownIt-Anchor" href="#循环不变式的代码外提"></a> 循环不变式的代码外提</h4>
<blockquote>
<p>不随循环控制变量改变而改变的表达式</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060909076.png" alt="image-20241206090911018" /></p>
<h4 id="循环展开"><a class="markdownIt-Anchor" href="#循环展开"></a> 循环展开</h4>
<blockquote>
<p>以空间换时间</p>
</blockquote>
<p>判断原则：</p>
<ul>
<li>主存资源丰富，处理机时间昂贵</li>
<li>循环体语句越少越好</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060910316.png" alt="image-20241206091017241" /></p>
<p>实现步骤：</p>
<ul>
<li>识别循环结构，确定循环的初值，终值，步长</li>
<li>判断，以空间换时间是否合算来决定是否展开</li>
<li>展开，重复产生循环体所需的代码个数</li>
</ul>
<h4 id="归纳变量的优化和条件判断的替换"><a class="markdownIt-Anchor" href="#归纳变量的优化和条件判断的替换"></a> 归纳变量的优化和条件判断的替换</h4>
<p>归纳变量：循环中固定增加或减少一个常量值</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060922552.png" alt="image-20241206092200468" /></p>
<h1 id="15-目标代码生成"><a class="markdownIt-Anchor" href="#15-目标代码生成"></a> 15 目标代码生成</h1>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412060923506.png" alt="image-20241206092317450" /></p>
<p>代码生成器的输入：</p>
<ul>
<li>源程序的中间表示
<ul>
<li>线性表示（波兰式）</li>
<li>三地址码（四元式）</li>
<li>栈式中间代码（p-code/java bytecode）</li>
<li>图形表示</li>
</ul>
</li>
<li>符号表信息</li>
</ul>
<p>目标程序种类：汇编语言，包含绝对地址的机器语言，可重定位的机器语言</p>
<p>目标体系结构：微处理器，虚拟机</p>
<h2 id="现代微处理器体系结构简介"><a class="markdownIt-Anchor" href="#现代微处理器体系结构简介"></a> 现代微处理器体系结构简介</h2>
<h3 id="指令集架构"><a class="markdownIt-Anchor" href="#指令集架构"></a> 指令集架构</h3>
<p>栈式指令集架构：在栈顶做运算</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061019072.png" alt="image-20241206101949003" /></p>
<p>累加器式指令集架构：可以访问内存</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061020288.png" alt="image-20241206102015219" /></p>
<p>寄存器-内存指令集架构 vs 寄存器-寄存器指令架构</p>
<p>区别：是否可以直接内存寻址</p>
<p>共性：内部有多个寄存器可以直接作为 ALU 指令的任一操作数</p>
<p>优点：减小内存访问，减小指令数</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061022192.png" alt="image-20241206102255110" /></p>
<h3 id="存储层次架构"><a class="markdownIt-Anchor" href="#存储层次架构"></a> 存储层次架构</h3>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061027276.png" alt="image-20241206102754186" /></p>
<h2 id="地址空间"><a class="markdownIt-Anchor" href="#地址空间"></a> 地址空间</h2>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061033846.png" alt="image-20241206103318769" /></p>
<h3 id="程序运行栈"><a class="markdownIt-Anchor" href="#程序运行栈"></a> 程序运行栈</h3>
<p>子程序/函数运行时所需的基本空间：<strong>活动记录</strong></p>
<p>地址空间从高地址到低地址向下生长</p>
<ul>
<li>ESI：作为源地址指针使用</li>
<li>EDI：作为目的地址指针使用</li>
</ul>
<h2 id="寄存器的分配和指派"><a class="markdownIt-Anchor" href="#寄存器的分配和指派"></a> 寄存器的分配和指派</h2>
<h3 id="全局寄存器分配"><a class="markdownIt-Anchor" href="#全局寄存器分配"></a> 全局寄存器分配</h3>
<blockquote>
<p>全局是相对于基本块而言，分配对象主要是函数的局部变量，包括函数入口参数，有限分配给跨基本块仍然活跃的变量，尤其是循环体内最活跃的变量</p>
</blockquote>
<p><mark>专属于线程</mark></p>
<h4 id="引用计数"><a class="markdownIt-Anchor" href="#引用计数"></a> 引用计数</h4>
<blockquote>
<p>统计变量在函数内被引用的次数，根据被引用的特点赋予不同权重，计算唯一权值，根据权值大小分配</p>
</blockquote>
<p><mark>循环中的变量应该得到加权</mark></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061047848.png" alt="image-20241206104712750" /></p>
<p>【PPT P46】</p>
<h4 id="图着色算法"><a class="markdownIt-Anchor" href="#图着色算法"></a> 图着色算法</h4>
<p>思想：可供分配 k 个全局寄存器，用 k 种颜色给冲突图着色。</p>
<p>步骤：</p>
<ul>
<li>通过活跃变量分析，构建变量的冲突图</li>
<li>尝试用 k 种颜色给该冲突图着色</li>
<li>不够用，考虑权重问题</li>
</ul>
<h4 id="启发式图着色"><a class="markdownIt-Anchor" href="#启发式图着色"></a> 启发式图着色</h4>
<p>设寄存器数目为 k。</p>
<p>步骤：</p>
<ul>
<li>找到第一个连接边数目小于 k 的节点从图中移走</li>
<li>重复步骤 1，直到无法从图中移走</li>
<li>在图中选取适当（权重等算法）的节点， 将它记录为“不分配全局寄存器”的节点，从图中移走</li>
<li>重复，直到图中仅剩余一个节点</li>
<li>按照节点移走的顺序将点和边添加回去并分配颜色</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412061127434.png" alt="image-20241206112718362" /></p>
<h3 id="临时寄存器分配"><a class="markdownIt-Anchor" href="#临时寄存器分配"></a> 临时寄存器分配</h3>
<blockquote>
<p>Q：为什么管理临时寄存器？</p>
<p>A：生成某些指令时，必须使用指令寄存器。临时寄存器保存有此前的计算中间结果。</p>
</blockquote>
<h4 id="临时寄存器池"><a class="markdownIt-Anchor" href="#临时寄存器池"></a> 临时寄存器池</h4>
<p>进入基本块，清空临时寄存器池</p>
<p>申请处理：</p>
<ul>
<li>有空闲：分配申请，做表示</li>
<li>没有：选取一个在即将生成代码中不会被使用的寄存器写回相应的内存空间</li>
</ul>
<p>退出基本块：将寄存器池中的值写回内存，清空临时寄存器池</p>
<h1 id="final"><a class="markdownIt-Anchor" href="#final"></a> final</h1>
<h2 id="填空"><a class="markdownIt-Anchor" href="#填空"></a> 填空</h2>
<p><mark>规范归约：减掉当前句型的句柄</mark></p>
<p>**句型（可以有非终结符）**的短语、简单短语、句柄、素短语：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412162106587.png" alt="image-20241216210623506" /></p>
<p>乔姆斯基文法的定义和分类：</p>
<ul>
<li>
<p>0 型：短语结构文法，左部右部均可以是符号串，一个短语可以产生另一个短语，可被图灵机接受</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>u</mi><mo>→</mo><mi>v</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>+</mo></msup><mo separator="true">,</mo><mi>V</mi><mo>=</mo><msub><mi>V</mi><mi>n</mi></msub><mo>∪</mo><msub><mi>V</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">P:u\rightarrow v,其中u\in V^+,V=V_n\cup V_t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.015771em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>1 型：上下文有关，只有在 x，y 的情况下才可以改写，由线性界限自动机，1 型语言 L1</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>x</mi><mi>U</mi><mi>y</mi><mo>→</mo><mi>x</mi><mi>u</mi><mi>y</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>U</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">P:xUy\rightarrow xuy,其中U\in V_n,x,y,u\in V^*
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>2 型：上下文无关文法，1 型文法<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，由下推自动机接受</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>:</mo><mi>U</mi><mo>→</mo><mi>u</mi><mo separator="true">,</mo><mi mathvariant="normal">其</mi><mi mathvariant="normal">中</mi><mi>U</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub><mo separator="true">,</mo><mi>u</mi><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">P:U\rightarrow u,其中U\in V_n,u\in V^*
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">中</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.738696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>3 型：由有穷自动机接受，<strong>正则文法</strong></p>
<p>左线性：非终结符在最左，右线性：非终结符在最右</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291703041.png" alt="image-20241129170313345" /></p>
</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411291704436.png" alt="image-20241129170345770" /></p>
<p>翻译文法：</p>
<p>是上下文无关文法，终结符号集由输入符号和动作符号组成，由翻译文法产生的终结符号串称为活动序列（终结符，动作符号）</p>
<p><strong>活动序列=输入序列+动作序列（对偶集）</strong></p>
<p>NFA：δ 是多值函数，输入允许为 ε，允许在某个状态下，输入字符存在多个后继状态</p>
<h2 id="大题"><a class="markdownIt-Anchor" href="#大题"></a> 大题</h2>
<h3 id="正则表达式"><a class="markdownIt-Anchor" href="#正则表达式"></a> 正则表达式</h3>
<p><strong><font color='orange'>NFA 确定化：</font></strong></p>
<ul>
<li>画出 NFA，可以先化简一些<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，比如多个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>连续，先去除若干状态</li>
<li>状态：从初始开始，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>能到达的地方的集合作为第一个状态，<mark>包含最终态的状态均为终态</mark></li>
<li>画出 NFA，<mark>记得化终态</mark></li>
</ul>
<p><strong><font color='orange'>DFA 最小化：</font></strong></p>
<ul>
<li>将上面的状态-输入表整理</li>
<li><strong>首先区分终态和非终态</strong></li>
<li>下一状态均指向相同子集的作为同一状态，<strong>可以 3,5（割开的）作为相同子集</strong></li>
<li>化 DFA，最终通过正则表达式验证一下是否合理</li>
</ul>
<p><strong><font color='orange'>相互转化：</font></strong></p>
<p>正则表达式：扩充 BNF</p>
<p>正则文法：<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171438469.png" alt="image-20241217143801406" style="zoom:33%;" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171438961.png" alt="image-20241217143851889" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171437394.png" alt="image-20241217143450947" /></p>
<h3 id="算符优先文法"><a class="markdownIt-Anchor" href="#算符优先文法"></a> 算符优先文法</h3>
<p>不一定是严格的最左归约</p>
<p><strong><font color='orange'>算符优先文法定义：</font></strong></p>
<p>若文法中无形如<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mo separator="true">⋅</mo><mi>V</mi><mi>W</mi><mo separator="true">⋅</mo></mrow><annotation encoding="application/x-tex">U::=·VW·</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mpunct">⋅</span></span></span></span>规则，这里<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo separator="true">,</mo><mi>W</mi><mo>∈</mo><msub><mi>V</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">V,W\in V_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则为算符文法。如果在其中任意两个终结符之间，至多只有上述关系的一种，则为算符优先文法</p>
<p><strong>如果是算符优先文法，肯定在优先矩阵中最多只有一个关系</strong></p>
<p><mark>可以分析二义性文法，句柄不唯一</mark></p>
<p>每次归约的是最左素短语：至少包含一个终结符，且不包含除自身之外的素短语</p>
<p><strong><font color='orange'>求 FIRSTVT 和 LASTVT：</font></strong></p>
<p>构造 FIRSTVT(U)：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111755198.png" alt="image-20241211175502132" /></p>
<p>构造 LASTVT(U)：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111755291.png" alt="image-20241211175523229" /></p>
<p>简单而言就是：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>b</mi><mo separator="true">,</mo><mi>U</mi><mo>→</mo><mi>V</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">U\rightarrow b,U\rightarrow Va
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault">a</span></span></span></span></span></p>
<p>则，</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mi>V</mi><mi>T</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo><mo>=</mo><mi>b</mi><mo>+</mo><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mi>V</mi><mi>T</mi><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FIRSTVT(U)={b}+FIRSTVT(V)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">b</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span></span></p>
<p><strong><font color='orange'>构造优先关系矩阵：</font></strong></p>
<p>a 是栈内，b 是栈外：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111752568.png" alt="image-20241211175247511" /></p>
<p>a 是栈内，FIRSTVT(U)是栈外：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412151717929.png" alt="image-20241215171756872" /></p>
<p>LASTVT(U)是栈内，b 是栈外：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412151718357.png" alt="image-20241215171749164" /></p>
<p><mark>关于#（开始符号和结束符号）</mark>：它是终结符，首先记住无论它在哪里，肯定是它最小</p>
<p>栈内#：代表开始符号，小于最开始的终结符和 FIRSTVT(E)（任意在最开始的非终结符）</p>
<p>栈外#：代表结束符号，小于最末尾的终结符和 LASTVT(E)（任意在最末尾的非终结符）</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412151731061.png" alt="image-20241215173146994" /></p>
<p><strong><font color='orange'>归约符号串：</font></strong></p>
<p>小于移进，大于归约</p>
<p>到最后的时候是比较符号栈中最上面的终结符（可能最顶是非终结符）</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171539893.png" alt="image-20241217153816278" /></p>
<h3 id="符号表和运行栈"><a class="markdownIt-Anchor" href="#符号表和运行栈"></a> 符号表和运行栈</h3>
<p><strong><font color='orange'>栈式符号表：</font></strong></p>
<p>当不用的函数等出作用域时，就不用在写在符号表里了</p>
<ul>
<li>层次：<strong>看题目从几开始，画出大括号，多个函数并列就是在同一层次</strong></li>
<li>名字：Ident</li>
<li>种类：简单变量 var、函数 program、过程 procedure、数组 array、标号 real、参数 param</li>
<li>类型：int，char</li>
</ul>
<p><mark>注意函数属于上一次，如果两个函数并列，别忘了把上一个函数也写上</mark></p>
<p><mark>先画好层次大括号图</mark></p>
<p><strong><font color='orange'>活动记录：</font></strong></p>
<ul>
<li>display：外层模块，存放<strong>各外层模块</strong>活动记录的基地址</li>
<li>压入栈：跟随运行过程，只要用到的都要压入栈</li>
<li>prev abp：是谁调用了本模块</li>
</ul>
<p><strong>数组需要占两行：f 和 f 模版</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412162028285.png" alt="image-20241216202841182" /></p>
<h3 id="ll1文法-2"><a class="markdownIt-Anchor" href="#ll1文法-2"></a> LL(1)文法</h3>
<p><strong><font color='orange'>求 FIRST 和 FOLLOW：</font></strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/RENSRM/article/details/111595754">如何求 First 集与 Follow 集（超详细）_first 集合和 follow 集合的求法-CSDN 博客</a></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412151856080.png" alt="image-20241215185602013" /></p>
<p><strong><font color='orange'>LL(1)文法分析表：</font></strong></p>
<p>将所有 FIRST 集填入到表中，如果某非终结符可以推出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，将所有其 FOLLOW 中的终结符处都填上<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">A\rightarrow \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>。</p>
<p><strong><font color='orange'>利用文法分析句子：</font></strong></p>
<p>只有非终结符遇到非终结符才会出栈，否则一直根据分析表向下分析，不继续读入符号</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111620321.png" alt="image-20241211161945074" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111622765.png" alt="image-20241211162212691" /></p>
<p><strong><font color='orange'>判断是否是 LL(1)文法：</font></strong></p>
<p>其分析表 M 不含多重定义入口（即分析表中无两条以上规则）</p>
<p>是 LL(1)文法的充要条件，即证明是 LL(1)文法：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412111655344.png" alt="image-20241211165530286" /></p>
<p><strong><font color='orange'>证明有些一定不会 LL(1)文法：</font></strong></p>
<p>如果 G 是左递归的，或者是二义性的文法，则至少有一个多重入口</p>
<p>左递归：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>:</mo><mo>:</mo><mo>=</mo><mi>U</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">∣</mi><mi>a</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">U::=U...|a...
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">∣</span><span class="mord mathdefault">a</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span></span></span></p>
<p>则有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><mi>U</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>F</mi><mi>I</mi><mi>R</mi><mi>S</mi><mi>T</mi><mo stretchy="false">(</mo><mi>a</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">)</mo><mi mathvariant="normal">≠</mi><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">FIRST(U...)\cap FIRST(a...)\neq \empty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span></p>
<p>二义性：</p>
<p>对文法所定义的某些句子存在两个最左推导，即在推导的某些步存在多重定义，有两条规则可用，所以分析表是多重定义的</p>
<h3 id="lr-分析法-2"><a class="markdownIt-Anchor" href="#lr-分析法-2"></a> LR 分析法</h3>
<p><strong><font color='orange'>LR(0)分析法：</font></strong></p>
<ul>
<li>
<p>将文法拓广，使其只有一个接受状态</p>
</li>
<li>
<p>列出文法的所有项目</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412152224224.png" alt="image-20241215222418150" /></p>
</li>
<li>
<p>将有关项目组成项目集，即为 LR(0)</p>
</li>
<li>
<p>计算项目集闭包 closure<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412152226578.png" alt="image-20241215222620508" /></p>
</li>
<li>
<p>计算状态转移函数 GOTO<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412152226859.png" alt="image-20241215222640801" /></p>
</li>
<li>
<p>有出边的填 Action(S)，没有出边的给拓展文法标号，填 Action®，给最初的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>E</mi><mo mathvariant="normal">′</mo></msup><mo>→</mo><mi>E</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">E&#x27;\rightarrow E.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">.</span></span></span></span>的ACTION[k,#]=acc<img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412161014383.png" alt="image-20241216101422277" /></p>
</li>
</ul>
<p><strong><font color='orange'>SLR(1)分析法：</font></strong></p>
<p>只有归约过程改变，根据文法左边非终结符的 follow 集，填入到 Action 表中，编号是产生式的编号</p>
<p><strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>→</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">R\rightarrow .</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.10556em;vertical-align:0em;"></span><span class="mord">.</span></span></span></span>也要填<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>→</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">R\rightarrow \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>的序号</strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412161043269.png" alt="image-20241216104347220" /></p>
<p><strong><font color='orange'>根据 Action 和 GOTO 表分析输入串：</font></strong></p>
<p>表头：状态栈，已识别符号，待输入串，动作</p>
<ul>
<li>S：移进，根据 Action</li>
<li>R：根据产生式归约，出栈（要根据产生式！！！），根据栈顶的状态查 GOTO 表</li>
</ul>
<p>acc：如果没有扩展文法就是第一个式子在末尾点点的时候</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171637787.png" alt="image-20241217163709727" /></p>
<blockquote>
<p>如果是要归约<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>→</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">R\rightarrow \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>，那就是压入栈中 R</p>
</blockquote>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412172038012.png" alt="image-20241217203816908" /></p>
<p><strong><font color='orange'>求活前缀：</font></strong></p>
<ol>
<li>
<p>短语：前面句型中的某个非终结符所能推出的符号串，由每颗子树的叶子组成</p>
<p><mark>任何句型本身一定是相对于识别符号 Z 的短语</mark></p>
<p><img src="https://img2018.cnblogs.com/blog/1483449/201906/1483449-20190621214719278-2019466211.png" alt="" /></p>
<p><img src="https://img2018.cnblogs.com/blog/1483449/201906/1483449-20190621214726660-1595534738.png" alt="" /></p>
</li>
<li>
<p>简单子树：树的高度为两层的子树</p>
</li>
<li>
<p>简单短语：简单子树的叶子结点</p>
</li>
<li>
<p>句柄：最左简单短语，最左简单子树的叶子</p>
</li>
</ol>
<p>活前缀：</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412161418799.png" alt="image-20241216141501835" /></p>
<p><strong><font color='orange'>求能识别活前缀的有效项目集：</font></strong></p>
<p>将点点在最后一个字符的后面，然后求 closure</p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412161427309.png" alt="image-20241216142726234" /></p>
<p><strong><font color='orange'>判断 SLR 分析法：</font></strong></p>
<p>如果分析表有多重定义入口，分析动作不唯一，就不是 SLR(1)</p>
<h3 id="代码优化"><a class="markdownIt-Anchor" href="#代码优化"></a> 代码优化</h3>
<p><strong><font color='orange'>构建 DAG：</font></strong></p>
<p>方法：</p>
<ul>
<li>建立节点表，记录了变量名和常量值，以及他们当前多对应的 DAG 图中的节点的序号。该表初始状态为空</li>
<li>对于形如<code>z=x op y</code>的中间代码，首先在节点表寻找 x，如果找到则记录下对应节点号 i；反之新建叶节点，假设其节点号仍为 i，标记为 x（如 x 为变量名，该标记更改为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>）；在节点表中增加新的一项（x，i），表明二者关系。y 与 x 同理。</li>
<li>在 DAG 寻找中间节点，标记为 op，左操作数节点号为 i，右操作数节点号为 j。如果找到记录下其节点号 k；如果未找到，在 DAG 图中新建一个中间节点，假设其节点号仍为 k，并将节点 i 和 j 分别与 k 相连，作为其左子节点和右子节点</li>
<li>在节点表中寻找 z，如果找到，将 z 所对应的节点号更改为 k；如果未找到，在节点表中新建一项(z, k)，表明二者之间的对应关系</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202411022113992.png" alt="image-20241102211311907" /></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051530555.png" alt="image-20241205153032489" /></p>
<p><strong><font color='orange'>导出中间代码：</font></strong></p>
<p>方法：</p>
<ol>
<li>初始化一个放置 DAG 图中间节点的队列</li>
<li>如果 DAG 图中还有<mark>中间节点</mark>未进入队列，则执行步骤 3，否则执行步骤 5</li>
<li>选取一个尚未进入队列，但其所有父节点均已进入队列的中间节点 n 将其加入队列；或选取没有父节点的中间节点，将其加入队列</li>
<li>如果 n 的最左子节点符合步骤 3 的条件，将其加入队列；并沿着当前节点的最左边，循环访问其最左子节点，最左子节点的最左子节点等，将符合步骤 3 条件的中间节点依次加入队列；如果出现不符合步骤 3 条件的最左子节点，执行步骤 2</li>
<li>将中间节点队列逆序输出，便得到中间节点的计算顺序，将其整理成中间代码序列</li>
</ol>
<p><strong>叶节点不属于节点，不占用最左的范围。eg：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">t_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的最左子节点为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">t_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong></p>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412051554209.png" alt="image-20241205155459140" /></p>
<p><strong><font color='orange'>从活跃变量到冲突图：</font></strong></p>
<p>in 集和一个 out 集，分别表示到该语句仍然活跃的活跃变量，在该语句之后的还保持活跃的活跃变量。</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mi>u</mi><mi>s</mi><mi>e</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">(</mo><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>−</mo><mi>d</mi><mi>e</mi><mi>f</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo>=</mo><mi mathvariant="normal">所</mi><mi mathvariant="normal">有</mi><mi mathvariant="normal">后</mi><mi mathvariant="normal">继</mi><mi mathvariant="normal">的</mi><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[B]=use[B]\cup(out[B]-def[B])\\
out[B]=所有后继的in[B]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">后</span><span class="mord cjk_fallback">继</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">]</span></span></span></span></span></p>
<p>冲突图：</p>
<ul>
<li>只有跨越基本块活跃的变量才能分配到全局寄存器：在多个 in 或 out 活跃的变量</li>
<li>并且活跃范围重合的变量之间 无法共享全局寄存器</li>
</ul>
<p><img src="https://gitee.com/bxrbxr/images/raw/master/imgs/202412171834932.png" alt="image-20241217183446828" /></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">bubble</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/12/18/compiler/">http://example.com/2024/12/18/compiler/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com">bubble's blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2024/07/24/OS/"><span>BUAA_OS_final</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/img/background.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2024 By bubble</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>